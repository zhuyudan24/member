webpackJsonp([29],{Even:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var l=a("WSiR"),r=a("AKaA"),s=a("NTL1"),n=a("8V46"),o=a("UXnk"),i={name:"talkLogPage",data:function(){return{memberId:this.$route.query.memberId||"",navpath:[{name:"首页",path:""},{name:"微信会员",path:"/wechatmembers"},{name:"会员详情",path:"/wechatmemberDetail?memberId="+this.$route.query.memberId},{name:"通话记录",path:""}],page:{currentPage:1,pageSize:20,totalCount:0},memberData:[],telType:-1,tekStatys:-1,searchStr:"",dialogPlayVisible:!1,curRecordUrl:""}},methods:{closePlayer:function(){var e=document.getElementById("audioplayer");e.pause(),e.load()},playRecord:function(e){this.dilogPlayVisible=!0,this.curRecordUrl=e},handleSearch:function(){this.page.currentPage=1,this.getMemberCardsPage()},handleCurrentChange:function(e){this.page.currentPage=e,this.getMemberCardsPage()},handleSizeChange:function(e){this.page.pageSize=e,this.getMemberCardsPage()},goback:function(){this.$router.push({path:"wechatmemberDetail",query:{memberId:this.memberId}})},getMemberCardsPage:function(){var e=this;Object(r.a)(s.a.talkLogPage,{memberId:this.memberId,pageSize:this.page.pageSize,currentPage:this.page.currentPage,telType:this.telType,tekStatys:this.tekStatys,searchStr:this.searchStr}).then(function(t){0===t.data.errorCode?(e.memberData=t.data.result.page.result,e.page.currentPage=t.data.result.page.currentPage,e.page.totalCount=t.data.result.page.totalCount):Object(n.a)(t.data.message)}).catch(function(e){Object(n.b)(e)})}},created:function(){this.memberId&&this.getMemberCardsPage(),this.$store.commit("mutations-slide",!1)},components:{"v-nav":l.a,searchinput:o.a}},c={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"talk-container"},[a("div",{staticClass:"min100"},[a("v-nav",{attrs:{navpath:e.navpath}}),e._v(" "),a("div",{staticClass:"padding-container"},[a("div",{staticClass:"mBottom20"},[a("el-row",[a("el-col",{attrs:{span:19}},[a("el-select",{attrs:{placeholder:"所有类型"},on:{change:e.handleSearch},model:{value:e.telType,callback:function(t){e.telType=t},expression:"telType"}},[a("el-option",{key:-1,attrs:{label:"所有类型",value:-1}}),e._v(" "),a("el-option",{key:1,attrs:{label:"不良评价回访",value:1}}),e._v(" "),a("el-option",{key:2,attrs:{label:"ECM计划",value:2}})],1),e._v(" "),a("el-select",{staticStyle:{"margin-left":"5px"},attrs:{placeholder:"所有状态"},on:{change:e.handleSearch},model:{value:e.tekStatys,callback:function(t){e.tekStatys=t},expression:"tekStatys"}},[a("el-option",{key:-1,attrs:{label:"所有状态",value:-1}}),e._v(" "),a("el-option",{key:1,attrs:{label:"未接通",value:1}}),e._v(" "),a("el-option",{key:2,attrs:{label:"接通",value:2}})],1)],1),e._v(" "),a("el-col",{staticClass:"tr",attrs:{span:5}},[a("searchinput",{attrs:{stylelink:"width: 280px"},on:{handleSearch:e.handleSearch},model:{value:e.searchStr,callback:function(t){e.searchStr=t},expression:"searchStr"}})],1)],1)],1),e._v(" "),a("div",{staticClass:"mBottom40"},[a("div",{staticClass:"table-content"},[a("el-table",{ref:"multipleTable",attrs:{data:e.memberData,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{prop:"callBeginTime",label:"呼叫时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("formatTime")(t.row.callBeginTime))+"\n              ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"clerkName",label:"主叫信息"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"clerk"},[a("span",{staticClass:"clerkimg"},[a("img",{staticStyle:{"vertical-align":"middle"},attrs:{width:"60",height:"60",src:t.row.clerkImage,alt:""}})]),e._v(" "),a("span",{staticClass:"clerkname"},[e._v(e._s(t.row.clerkName)),a("br"),e._v(e._s(1==t.row.clerkType?"店长":0==t.row.clerkType?"店员":""))])])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"callType",label:"类型"}}),e._v(" "),a("el-table-column",{attrs:{prop:"callStatus",label:"通话状态"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.callStatus?a("span",[e._v("未接通")]):e._e(),e._v(" "),2==t.row.callStatus?a("span",[e._v("接通")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"callTime",label:"通话时长(秒)"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.callTime?a("span",[e._v(e._s(t.row.callTime))]):a("span",[e._v("--")])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"recordUrl",label:"录音"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.recordUrl?a("span",{staticClass:"pointer",on:{click:function(a){return e.playRecord(t.row.recordUrl)}}},[e._v("播放")]):e._e()]}}])})],1),e._v(" "),e.page.totalCount>0?a("div",{staticClass:"page mTop20"},[a("el-pagination",{attrs:{background:"","current-page":e.page.currentPage,"page-sizes":[20,40,60,80],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next",total:e.page.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()],1)])])],1),e._v(" "),a("div",{staticClass:"foot-add"},[a("vue-gic-footer")],1),e._v(" "),a("el-dialog",{attrs:{title:"播放",visible:e.dialogPlayVisible,width:"500px"},on:{"update:visible":function(t){e.dialogPlayVisible=t},close:e.closePlayer}},[a("div",[a("audio",{attrs:{controls:"",id:"audioplayer"}},[a("source",{attrs:{src:e.curRecordUrl,type:"audio/mpeg"}}),e._v(" "),a("source",{attrs:{src:e.curRecordUrl,type:"audio/ogg"}}),e._v("\n        Your browser does not support this audio format.\n      ")])]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogPlayVisible=!1}}},[e._v("关 闭")])],1)])],1)},staticRenderFns:[]};var u=a("VU/8")(i,c,!1,function(e){a("ubt8")},null,null);t.default=u.exports},ubt8:function(e,t){}});