webpackJsonp([14],{"W+mZ":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Dd8w"),r=s.n(a),i=s("//Fk"),o=s.n(i),n=s("fZjL"),l=s.n(n),c=s("UXnk"),m=s("+vdD"),d=s("AKaA"),u=s("WSiR"),g=s("NTL1"),p=s("8V46"),h=s("oAV5"),f=s("SJI6"),b=[],v=[],_={name:"wechatmembers",data:function(){return{storeNameVisible:!1,popWidth:450,visible:!1,isdot:!1,load:!1,toggleTag:!1,peopleVisible:!1,memberSearchStr:-1,navpath:[{name:"首页",path:""},{name:"微信会员",path:""}],sceneValue:"member",tableData:[],base:!1,pageName:"wxOpenCarMember",page:{currentPage:1,pageSize:20,totalCount:0},memberData:[],memberFields:[],sortColName:"",sortType:"desc",phoneNameCard:"",fieldsStr:[],dilogFieldVisible:!1,checkedFields:[],multipleList:[],selectAll:!1,batchValue:"",dilogIntegralVisible:!1,IntegralForm:{editType:1,accumulatPoints:0,remark:"",settlementStoreId:""},storeList:[],loading:!1,rules:{editType:[{required:!0,message:"请选择调整方式",trigger:"change"}],accumulatPoints:[{required:!0,message:"请选择调整额度",trigger:"change"}],remark:[{required:!0,message:"请输入原因备注",trigger:"change"}],settlementStoreId:[{required:!0,message:"请填写原始成本主体",trigger:"change"}]},dilogGradeVisible:!1,gradeForm:{gradeId:"",remark:""},memberGrade:[],graderules:{gradeId:[{required:!0,message:"请选择等级",trigger:"change"}],remark:[{required:!0,message:"请输入原因备注",trigger:"change"}]},mainstorerules:{remark:[{required:!0,message:"请输入原因备注",trigger:"change"}]},projectName:"member",showStoreDialog:!1,dilogMainstoreVisible:!1,mainstoreForm:{remark:"",optType:1,mainOptType:1,mainStoreId:""},storeName:"",selectId:"",dilogProcessVisible:!1,processList:[],timer:null,dilogSubStoreVisible:!1,storeForm:{remark:"",optType:2,subOptType:1,fromSubStoreId:"",toSubStoreId:"",phoneNameCard:"",premodefiySubStoreId:"",modefiySubStoreId:"",deleteSubStoreId:"",addSubStoreId:"",modefiySubStoreName:"",addSubStoreName:""},storerules:{remark:[{required:!0,message:"请输入原因备注",trigger:"change"}]},subStoreList:[],singleInfo:{sex:0,age:0,cardNo:0,mainStoreName:"dd",costFee:0,costTimes:0,lastCost:0,numOfSale:0,numOfmarket:0,couponCount:0,status:0,wxStatus:0,phoneStatus:0,authStatus:0},integralFlag:""}},computed:r()({},Object(f.mapState)(["storeImageUrl"])),filters:{formatField:function(e){var t=v.findIndex(function(t){return t.code==e});return v[t].name},formatFieldName:function(e){var t=b.findIndex(function(t){return t.code==e});return b[t].name},formatMember:function(e){return e&&e.length>3&&(e=e.substr(0,3)+"..."),e},formatCardName:function(e){return e&&e.length>10&&(e=e.substr(0,10)+"..."),e},formatTimeYMD:function(e){return"--"!=e?e.split(" ")[0]:"--"},formatTimeHMS:function(e){return"--"!=e?e.split(" ")[1]:"--"},formatProcess:function(e){var t=100*e.finishCount/e.taskCount,s=parseFloat(t);if(!isNaN(s))return s=Math.round(100*t)/100}},watch:{processList:function(e,t){var s=this;if(e.length<=0){clearTimeout(this.timer),this.getAjaxMembers()}else{clearTimeout(this.timer),this.timer=setTimeout(function(){s.getProcessList()},5e3)}},phoneNameCard:function(e){sessionStorage.setItem("phoneNameCard",e)}},methods:{getData:function(){this.$refs.peopleFilter.confirmSet()},findFilter:function(e){this.memberSearchStr=e||-1,this.page.pageSize=20,this.page.currentPage=1,this.getAjaxMembers()},cancelFilter:function(){this.$refs.peopleFilter.cancelSet()},getBackData:function(e){this.groupForm.indexSearchStr=e},editShow:function(){this.toggleTag=!0},editHide:function(){this.toggleTag=!1},hideBtn:function(e){0==e&&(this.memberSearchStr=-1,this.getAjaxMembers(),this.toggleTag=!1)},saveTempData:function(){consoleconsole.log("save")},formatTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},linkDetail:function(e){this.$router.push({path:"/wechatmemberDetail",query:{memberId:e}})},showSingleInfo:function(e){var t=this;this.singleInfo="",Object(d.a)(g.a.singleInfo,{memberId:e}).then(function(e){if(0===e.data.errorCode){var s=e.data.result.memberSingle;t.singleInfo=r()({},s,{sex:0==s.sex?"性别未知":1==s.sex?"男":"女",age:0!=s.age?s.age:"年龄未知",cardNo:s.cardNo?s.cardNo:"无会员卡",mainStoreName:s.mainStoreName?s.mainStoreName:"主门店未知"})}else Object(p.a)(e.data.message)}).catch(function(e){Object(p.b)(e)})},changeSubStore:function(){1==this.storeForm.subOptType&&(this.storeForm.modefiySubStoreName="",this.storeForm.modefiySubStoreId="",this.storeForm.deleteSubStoreId=""),2==this.storeForm.subOptType&&(this.storeForm.addSubStoreName="",this.storeForm.addSubStoreId="",this.storeForm.deleteSubStoreId=""),3==this.storeForm.subOptType&&(this.storeForm.addSubStoreName="",this.storeForm.addSubStoreId="",this.storeForm.modefiySubStoreName="",this.storeForm.modefiySubStoreId="")},submitStore:function(e){var t=this;this.$refs[e].validate(function(s){if(!s)return!1;var a=[];if(!(t.multipleList.length>0))return Object(p.a)("会员不能为空"),!1;if(t.multipleList.forEach(function(e){a.push(e.memberId)}),1==t.storeForm.subOptType){if(""==t.storeForm.addSubStoreId)return Object(p.a)("请选择新增协管门店"),!1;t.storeForm.fromSubStoreId=t.storeForm.addSubStoreId}if(2==t.storeForm.subOptType){if(""==t.storeForm.premodefiySubStoreId)return Object(p.a)("请选择协管门店"),!1;if(""==t.storeForm.modefiySubStoreId)return Object(p.a)("请选择要修改后的协管门店"),!1;t.storeForm.fromSubStoreId=t.storeForm.premodefiySubStoreId,t.storeForm.toSubStoreId=t.storeForm.modefiySubStoreId}3==t.storeForm.subOptType&&(t.storeForm.fromSubStoreId=t.storeForm.deleteSubStoreId),Object(d.a)(g.a.updateStore,{memberIds:1==t.selectAll?"-1":a.join(","),remark:t.storeForm.remark,isCurrent:1==t.selectAll?2:t.multipleList.length==t.page.pageSize?1:0,optType:t.storeForm.optType,subOptType:t.storeForm.subOptType,fromSubStoreId:t.storeForm.fromSubStoreId,toSubStoreId:2==t.storeForm.subOptType?t.storeForm.toSubStoreId:"",memberSearchParamStr:1==t.selectAll?t.memberSearchStr?t.memberSearchStr:"-1":"",phoneNameCard:t.phoneNameCard,pageName:"wxMember"}).then(function(s){if(t.$refs[e].resetFields(),0!==s.data.errorCode)return Object(p.a)(s.data.message),t.dilogSubStoreVisible=!1,!1;Object(p.c)(),t.dilogSubStoreVisible=!1}).then(function(){setTimeout(function(){t.getProcessList()},5e3)}).catch(function(s){Object(p.b)(s),t.dilogSubStoreVisible=!1,t.$refs[e].resetFields()})})},getSubStoreList:function(){var e=this,t=[];if(!(this.multipleList.length>0))return Object(p.a)("会员不能为空"),!1;this.multipleList.forEach(function(e){t.push(e.memberId)}),Object(d.a)(g.a.membersSubStoreList,{memberIds:t.join(","),isCurrent:1==this.selectAll?2:this.multipleList.length==this.page.pageSize?1:0,memberSearchParamStr:this.memberSearchStr?this.memberSearchStr:"",pageName:"wxMember",phoneNameCard:this.phoneNameCard}).then(function(t){0===t.data.errorCode?e.subStoreList=t.data.result.storeList:Object(p.a)(t.data.message)}).catch(function(e){Object(p.b)(e)})},closeProcess:function(){clearInterval(this.timer)},getBatchProcess:function(){this.dilogProcessVisible=!0},callProcess:function(){this.getProcessList()},getProcessList:function(){var e=this;Object(d.a)(g.a.batchProcess).then(function(t){0===t.data.errorCode?(e.isdot=t.data.result.list.length>0,e.popWidth=e.isdot?e.popWidth:160,e.processList=t.data.result.list.map(function(e){return r()({},e,{name:e.name?e.name:"未知"})})):Object(p.a)(t.data.message)}).catch(function(e){Object(p.b)(e)})},submitMainStore:function(e){var t=this;this.$refs[e].validate(function(s){if(!s)return!1;var a=[];return t.multipleList.length>0?(t.multipleList.forEach(function(e){a.push(e.memberId)}),4==t.mainstoreForm.mainOptType&&""==t.mainstoreForm.mainStoreId?(Object(p.a)("自定义门店不能为空"),!1):void Object(d.a)(g.a.updateStore,{memberIds:1==t.selectAll?"-1":a.join(","),remark:t.mainstoreForm.remark,isCurrent:1==t.selectAll?2:t.multipleList.length==t.page.pageSize?1:0,optType:t.mainstoreForm.optType,mainOptType:t.mainstoreForm.mainOptType,mainStoreId:t.mainstoreForm.mainStoreId,memberSearchParamStr:1==t.selectAll?t.memberSearchStr?t.memberSearchStr:"-1":"",phoneNameCard:t.phoneNameCard,pageName:t.pageName}).then(function(s){if(t.$refs[e].resetFields(),t.storeName="",0!==s.data.errorCode)return Object(p.a)(s.data.message),t.dilogMainstoreVisible=!1,!1;Object(p.c)(),t.dilogMainstoreVisible=!1,t.sortColName="",t.sortType="desc",t.phoneNameCard=""}).then(function(){setTimeout(function(){t.getProcessList()},5e3)}).catch(function(s){Object(p.b)(s),t.dilogMainstoreVisible=!1,t.$refs[e].resetFields()})):(Object(p.a)("会员不能为空"),!1)})},handleStore:function(){4==this.mainstoreForm.mainOptType&&(console.log(this.storeName,1),this.storeName="选择主门店",this.showStoreDialog=!0,this.storeNameVisible=!0),4!==this.mainstoreForm.mainOptType&&(this.mainstoreForm.mainStoreId="",this.storeName="")},changeStore:function(){this.showStoreDialog=!0},selectStore:function(e){console.log(e),l()(e).length>0&&("mainstore"==this.batchValue&&(this.mainstoreForm.mainStoreId=e.storeId,this.storeName=e.storeName,this.mainstoreForm.mainOptType=4),"store"==this.batchValue&&(1===this.storeForm.subOptType&&(this.storeForm.addSubStoreId=e.storeId,this.storeForm.addSubStoreName=e.storeName),2===this.storeForm.subOptType&&(this.storeForm.modefiySubStoreId=e.storeId,this.storeForm.modefiySubStoreName=e.storeName))),this.showStoreDialog=!1},submitGrade:function(e){var t=this;this.$refs[e].validate(function(s){if(!s)return!1;var a=[];if(!(t.multipleList.length>0))return Object(p.a)("会员不能为空"),!1;t.multipleList.forEach(function(e){a.push(e.memberId)}),Object(d.a)(g.a.updateGrade,{memberIds:1==t.selectAll?"-1":a.join(","),remark:t.gradeForm.remark,gradeId:t.gradeForm.gradeId,isCurrent:1==t.selectAll?2:t.multipleList.length==t.page.pageSize?1:0,memberSearchParamStr:1==t.selectAll?t.memberSearchStr?t.memberSearchStr:"-1":"",phoneNameCard:t.phoneNameCar,pageName:t.pageName}).then(function(s){if(t.$refs[e].resetFields(),0!==s.data.errorCode)return Object(p.a)(s.data.message),t.dilogGradeVisible=!1,!1;Object(p.c)(),t.dilogGradeVisible=!1,t.getAjaxMembers()}).then(function(){setTimeout(function(){t.getProcessList()},5e3)}).catch(function(s){Object(p.b)(s),t.dilogGradeVisible=!1,t.$refs[e].resetFields()})})},getGradeList:function(){var e=this;Object(d.a)(g.a.gradeList).then(function(t){if(0!==t.data.errorCode)return Object(p.a)(t.data.message),!1;e.memberGrade=t.data.result}).catch(function(e){Object(p.b)(e)})},closeGrade:function(e){this.$refs[e]&&this.$refs[e].resetFields()},getEnterpriseInfo:function(){var e=this;Object(d.a)(g.a.enterpriseInfo).then(function(t){0==t.data.errorCode?e.integralFlag=t.data.result.enterpriseInfo.integralFlag:Object(p.a)()}).catch(function(e){Object(p.b)(e)})},closeIntegral:function(e){this.IntegralForm.settlementStoreId="",this.$refs[e]&&this.$refs[e].resetFields()},submitIntegral:function(e){var t=this;this.$refs[e].validate(function(s){if(!s)return!1;var a=[];if(!(t.multipleList.length>0))return Object(p.a)("会员不能为空"),!1;t.multipleList.forEach(function(e){a.push(e.memberId)}),Object(d.a)(g.a.updateIntegrals,{memberIds:1==t.selectAll?"-1":a.join(","),remark:t.IntegralForm.remark,accumulatPoints:t.IntegralForm.accumulatPoints,editType:t.IntegralForm.editType,settlementStoreId:t.IntegralForm.settlementStoreId,isCurrent:1==t.selectAll?2:t.multipleList.length==t.page.pageSize?1:0,memberSearchParamStr:1==t.selectAll?t.memberSearchStr?t.memberSearchStr:"-1":"",phoneNameCard:t.phoneNameCard,pageName:"wxMember"}).then(function(s){return t.$refs[e]&&t.$refs[e].resetFields(),0===s.data.errorCode?(Object(p.c)(),t.getAjaxMembers(),!0):(Object(p.a)(),!1)}).then(function(e){t.IntegralForm.settlementStoreId="",t.dilogIntegralVisible=!1,e&&setTimeout(function(){t.getProcessList()},5e3)}).catch(function(s){Object(p.b)(s),t.dilogIntegralVisible=!1,t.$refs[e].resetFields()})})},handleKeyup:function(e){this.getStoreCodeName(e)},getStoreCodeName:function(e){var t=this;Object(d.b)(g.a.storeCodeName,{searchParam:e,flag:1}).then(function(e){0===e.data.errorCode?t.storeList=e.data.result:Object(p.a)(e.data.message)}).catch(function(e){Object(p.b)(e)})},handleVisibleBatch:function(e){if(this.multipleList.length<1)return this.batchValue="",Object(p.a)("请勾选会员"),!1;e||("integral"==this.batchValue&&(this.dilogIntegralVisible=!0,this.getEnterpriseInfo(),this.$refs.IntegralForm&&this.$refs.IntegralForm.resetFields()),"grade"==this.batchValue&&(this.dilogGradeVisible=!0,this.$refs.gradeForm&&this.$refs.gradeForm.resetFields()),"mainstore"==this.batchValue&&(this.dilogMainstoreVisible=!0,this.selectStore(e),this.$refs.mainstoreForm&&this.$refs.mainstoreForm.resetFields(),this.storeName=""),"store"==this.batchValue&&(this.dilogSubStoreVisible=!0,this.$refs.storeForm&&this.$refs.storeForm.resetFields(),this.getSubStoreList()))},handleFocusBatch:function(){if(this.multipleList.length<1)return this.batchValue="",Object(p.a)("请勾选会员"),!1},selectAllmultipleList:function(){var e=this;this.selectAll=!this.selectAll,this.selectAll?this.memberData.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t,!0)}):this.$refs.multipleTable.clearSelection()},handleCurrentChange:function(e){this.page.currentPage=e,sessionStorage.setItem("currentPage",e),this.getAjaxMembers()},handleSizeChange:function(e){this.page.pageSize=e,this.getAjaxMembers()},sortChange:function(e,t,s){this.sortColName=e.prop,"descending"===e.order&&(this.sortType="desc"),"ascending"===e.order&&(this.sortType="asc"),this.getAjaxMembers()},submitFields:function(){var e=this,t="";this.checkedFields.length>0&&(t=this.checkedFields.join(",")),Object(d.a)(g.a.updateFields,{pageName:this.pageName,fields:t}).then(function(t){0===t.data.errorCode?(Object(p.c)(),e.memberData=[],e.fieldsStr=[],e.getAjaxMembers()):Object(p.a)(t.data.message),e.dilogFieldVisible=!1}).catch(function(t){Object(p.b)(t),e.diogFieldVisible=!1})},handleMemberFields:function(){this.dilogFieldVisible=!0,this.checkedFields=[],this.memberFields=[],b=[],this.getFindMemberFields()},getFindMemberFields:function(){var e=this;Object(d.a)(g.a.findMemberFields,{pageName:this.pageName}).then(function(t){if(0===t.data.errorCode){var s=t.data.result;b=s,s.forEach(function(t){t.check&&e.checkedFields.push(t.code),e.memberFields.push(t.code)})}else Object(p.a)(t.data.message)}).catch(function(e){Object(p.b)(e)})},getAjaxMembers:function(){var e=this;Object(d.a)(g.a.ajaxMembers,{sortColName:this.sortColName,sortType:this.sortType,phoneNameCard:this.phoneNameCard,pageSize:this.page.pageSize,currentPage:this.page.currentPage,memberSearchStr:this.memberSearchStr,pageName:this.pageName,showFields:"-1"}).then(function(t){if(e.load=!0,0===t.data.errorCode){if(e.load=!1,t.data.result.fieldsStr){e.fieldsStr=t.data.result.fieldsStr.split(","),e.fieldsStr=e.fieldsStr.filter(function(e){return""!==e});for(var s=0;s<e.fieldsStr.length;s++)e.fieldsStr[s].indexOf("Receivable")>-1&&(e.fieldsStr.splice(s,1),s--)}var a=t.data.result.page.result;a&&a.length?e.memberData=a.map(function(t){return r()({},t,{avgNumber:t.avgNumber.toFixed(2),lastCostTime:-1!=t.lastCostTime?Object(h.a)(t.lastCostTime,2):"--",createTime:-1!=t.createTime?Object(h.a)(t.createTime,1):"--",attentionDate:-1!=t.attentionDate?Object(h.a)(t.attentionDate,1):"--",cancelAttentionTime:-1!=t.cancelAttentionTime?Object(h.a)(t.cancelAttentionTime,2):"--",attentionTime:-1!=t.attentionTime?Object(h.a)(t.attentionTime,1):"--",crateCardDateString:-1!=t.crateCardDateString?Object(h.a)(t.crateCardDateString,1):"--",birthdayMD:0!=t.birthdayMD?Object(h.c)(t.birthdayMD):"--",sex:0==t.sex?"性别未知":1==t.sex?"男":"女",age:t.age?t.age:"年龄未知",cardNo:t.cardNo?t.cardNo:"无会员卡",mainStoreName:t.mainStoreName?t.mainStoreName:"主门店未知",thirdImgUrl:t.thirdImgUrl?t.thirdImgUrl:e.storeImageUrl})}):e.memberData=[],e.page.currentPage=t.data.result.page.currentPage,e.page.totalCount=t.data.result.page.totalCount}else e.load=!1,Object(p.a)(t.data.message)}).catch(function(e){Object(p.b)(e)})},handleSelectionChange:function(e){this.multipleList=e},handleSearch:function(e){this.phoneNameCard=e.target.value,this.page.currentPage=1,this.getAjaxMembers()},initialize:function(){this.phoneNameCard=sessionStorage.getItem("phoneNameCard")?sessionStorage.getItem("phoneNameCard"):"",this.page.currentPage=sessionStorage.getItem("currentPage")?sessionStorage.getItem("currentPage"):1},fieldList:function(){Object(d.a)(g.a.findMemberFields,{pageName:this.pageName}).then(function(e){if(0===e.data.errorCode){var t=e.data.result;v=t&&t.length?t:[]}else v=[]})},promiseAll:function(){var e=["http://gicdev.demogic.com/api-member/find-member-fields?requestProject=member","http://gicdev.demogic.com/api-member/enterprise-info?requestProject=member"].map(function(e){return fetch(e)});o.a.all(e).then(function(e){console.log(e),e.forEach(function(e){console.log(e)})})}},activated:function(){this.$store.commit("mutations-slide",!0)},created:function(){this.fieldList(),this.storeImageUrl||this.$store.dispatch("getStorePicture"),this.getProcessList(),this.getEnterpriseInfo(),this.initialize(),this.getAjaxMembers(),this.getGradeList()},components:{searchinput:c.a,Navbar:m.a,NavPath:u.a}},S=r()({},_),C={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"wechat-gic"},[s("div",{staticClass:"min100"},[s("nav-path",{attrs:{navpath:e.navpath}},[s("router-link",{staticClass:"wechat-setting member-wechat-set-primary",attrs:{slot:"member",to:"/wechatmembers/memberSetting",tag:"span"},slot:"member"},[e._v("设 置")])],1),e._v(" "),s("div",{staticClass:"wechat-part"},[s("div",{staticClass:"gic-people"},[s("h2",{staticClass:"adpot-container"},[e._v("\n          适用人群\n        ")]),e._v(" "),s("div",{staticClass:"people-box"},[s("vue-gic-people",{ref:"peopleFilter",attrs:{sceneValue:e.sceneValue,isAdd:!0},on:{findFilter:e.findFilter,editHide:e.editHide,editShow:e.editShow,hideBtn:e.hideBtn}}),e._v(" "),e.toggleTag?s("div",{staticClass:"people-button"},[s("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getData}},[e._v("确定")]),e._v(" "),s("el-button",{attrs:{size:"small"},on:{click:e.cancelFilter}},[e._v("取消")])],1):e._e()],1)]),e._v(" "),s("div",{staticClass:"handler"},[e.multipleList.length==e.page.pageSize?s("p",{staticClass:"multiple"},[0==e.selectAll?s("span",[e._v("已勾选本页 "+e._s(e.multipleList.length)+" 个会员，")]):s("span",[e._v("已勾选 "+e._s(e.page.totalCount)+" 个会员，")]),e._v(" "),0==e.selectAll?s("span",{staticClass:"multiple-all pointer",on:{click:e.selectAllmultipleList}},[e._v("勾选全部 "+e._s(e.page.totalCount)+" 个会员")]):s("span",{staticClass:"multiple-all pointer",on:{click:e.selectAllmultipleList}},[e._v("取消勾选")])]):e._e(),e._v(" "),s("div",{staticClass:"handler-search"},[e._v("\n          会员共"+e._s(e.page.totalCount)+"人\n          "),e._v(" "),s("el-input",{staticStyle:{width:"249px"},attrs:{placeholder:"输入会员姓名/昵称/手机号码",maxlength:"32",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch(t)}},model:{value:e.phoneNameCard,callback:function(t){e.phoneNameCard=t},expression:"phoneNameCard"}},[s("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),e._v(" "),s("div",{staticClass:"handler-setting"},[s("el-select",{staticStyle:{width:"130px"},attrs:{placeholder:"批量操作"},on:{change:e.handleFocusBatch,"visible-change":e.handleVisibleBatch},model:{value:e.batchValue,callback:function(t){e.batchValue=t},expression:"batchValue"}},[s("el-option",{key:"integral",attrs:{label:"调整积分",value:"integral"}}),e._v(" "),s("el-option",{key:"grade",attrs:{label:"调整会员等级",value:"grade"}}),e._v(" "),s("el-option",{key:"mainstore",attrs:{label:"修改主门店",value:"mainstore"}}),e._v(" "),s("el-option",{key:"store",attrs:{label:"修改协管门店",value:"store"}})],1),e._v(" "),s("el-button",{staticClass:"member-wechat-setting",attrs:{type:"primary",icon:"el-icon-setting"},on:{click:e.handleMemberFields}}),e._v(" "),s("el-popover",{attrs:{placement:"top-start",width:e.popWidth,trigger:"hover"},on:{show:e.callProcess},model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[e.processList.length>0?s("div",e._l(e.processList,function(t,a){return s("div",{key:a},[s("span",{staticClass:"process-span"},[e._v(e._s(t.name))]),e._v(" "),s("div",{staticStyle:{display:"inline-block",width:"300px"}},[s("el-progress",{attrs:{percentage:0==t.taskCount?100:+(100*t.finishCount/t.taskCount).toFixed(2)}})],1)])}),0):s("div",{staticStyle:{"text-align":"center"}},[e._v("\n                暂无批量处理数据\n              ")]),e._v(" "),s("el-badge",{staticClass:"item",attrs:{slot:"reference","is-dot":e.isdot},slot:"reference"},[s("el-button",{staticClass:"member-wechat-timer",attrs:{type:"primary",icon:"el-icon-time"}})],1)],1)],1)],1),e._v(" "),s("div",{staticClass:"tablecontent"},[s("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.load,expression:"load"}],ref:"multipleTable",attrs:{data:e.memberData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange,"sort-change":e.sortChange}},[s("el-table-column",{attrs:{type:"selection",width:"50",fixed:""}}),e._v(" "),e._l(e.fieldsStr,function(t,a){return s("div",{key:a},[s("el-table-column","name"==t||"grade"==t||"status"==t||"channel"==t||"createCardStoreName"==t||"cardNo"==t||"forzenStatus"==t||"mainStoreName"==t?{attrs:{fixed:"name"===t,prop:t,label:e._f("formatField")(t),width:"160"},scopedSlots:e._u([{key:"default",fn:function(a){return["name"==t?s("div",{staticClass:"tablecontent-cell",staticStyle:{cursor:"pointer"},on:{click:function(t){return e.linkDetail(a.row.memberId)}}},[s("el-popover",{attrs:{placement:"top-start",width:"400",height:"180",trigger:"hover"},on:{show:function(t){return e.showSingleInfo(a.row.memberId)}}},[s("div",{staticClass:"pointer",on:{click:function(t){return e.linkDetail(a.row.memberId)}}},[s("div",{staticClass:"singelinfo"},[s("div",{staticClass:"singelinfo-img"},[s("img",{attrs:{width:"100",height:"100",src:a.row.thirdImgUrl?a.row.thirdImgUrl:"./static/img/default.png",alt:""}})]),e._v(" "),s("div",{staticClass:"singelinfo-content pLeft10 pRight10"},[s("span",{staticClass:"lheigth0"},[e._v(e._s(a.row.memberName)+"\n                              "),s("span",{staticClass:"channelicon fr",class:0==e.singleInfo.status?"gzhiconcanclegray":1==e.singleInfo.status?"gzhicon":"gzhicongray",attrs:{title:0==e.singleInfo.status?"取消关注公众号":1==e.singleInfo.status?"已关注公众号":"未关注公众号"}}),e._v(" "),s("span",{staticClass:"channelicon fr mr6",class:0==e.singleInfo.wxStatus?"xcxicongray":1==e.singleInfo.wxStatus?"xcxicon":"",attrs:{title:0==e.singleInfo.wxStatus?"未使用小程序":1==e.singleInfo.wxStatus?"使用过小程序":""}})]),e._v(" "),s("p",{staticClass:"lheigth0"},[s("span",{staticClass:"evl-right"},[e._v(e._s(e.singleInfo.sex))]),e._v(" "),s("span",{staticClass:"evl-right"},[e._v(e._s(e.singleInfo.age))]),e._v(" "),s("span",{attrs:{title:e.singleInfo.cardNo}},[e._v(e._s(e._f("formatCardName")(e.singleInfo.cardNo)))])]),e._v(" "),s("p",{staticClass:"lheigth0"},[s("span",[e._v(e._s(e.singleInfo.mainStoreName))])]),e._v(" "),s("div",{staticClass:"singelinfo-cost"},[s("div",{staticClass:"singelinfo-costitem"},[s("p",[e._v(e._s(e.singleInfo.costFee))]),e._v(" "),s("p",[e._v("消费总额")])]),e._v(" "),s("div",{staticClass:"singelinfo-costitem"},[s("p",[e._v(e._s(e.singleInfo.costTimes))]),e._v(" "),s("p",[e._v("消费次数")])]),e._v(" "),s("div",{staticClass:"singelinfo-costitem"},[s("p",[e._v(e._s(e.singleInfo.lastCost))]),e._v(" "),s("p",[e._v("最近消费")])])])])]),e._v(" "),s("div",{staticClass:"singelinfo-jl mBottom20 mTop20"},[s("a",{staticClass:"singelinfo-jlitem"},[e._v("消费记录 ("+e._s(e.singleInfo.numOfSale)+")")]),e._v(" "),s("a",{staticClass:"singelinfo-jlitem"},[e._v("营销记录 ("+e._s(e.singleInfo.numOfmarket)+")")]),e._v(" "),s("a",{staticClass:"singelinfo-jlitem"},[e._v("卡券记录 ("+e._s(e.singleInfo.couponCount)+")")])])]),e._v(" "),s("span",{staticClass:"member-span",attrs:{slot:"reference"},slot:"reference"},[s("img",{staticClass:"tablecontent-cellimg mr6",attrs:{width:"60",height:"60",src:a.row.thirdImgUrl?a.row.thirdImgUrl:"./static/img/default.png",alt:""}})])]),e._v(" "),s("span",{staticClass:"fix-block"},[e._v(e._s(e._f("formatMember")(a.row.memberName)))])],1):"grade"==t?s("span",[e._v(e._s(a.row.gradeName?a.row.gradeName:"-"))]):"status"==t?s("span",[s("span",{staticClass:"channelicon",class:0==a.row.wxStatus?"xcxicongray":1==a.row.wxStatus?"xcxicon":"",attrs:{title:0==a.row.wxStatus?"未使用小程序":1==a.row.wxStatus?"已使用小程序":""}}),e._v(" "),s("span",{staticClass:"channelicon",class:0==a.row.status?"gzhiconcanclegray":1==a.row.status?"gzhicon":"gzhicongray",attrs:{title:0==a.row.status?"取消关注公众号":1==a.row.status?"已关注公众号":"未关注公众号"}})]):"channel"==t?s("span",[s("span",{staticClass:"channelicon",class:0==a.row.channelTaobao?"taobaoicongray":1==a.row.channelTaobao?"taobaoicon":""}),e._v(" "),s("span",{staticClass:"channelicon",class:0==a.row.channelJd?"jdicongray":1==a.row.channelJd?"jdicon":""}),e._v(" "),s("span",{staticClass:"channelicon",class:0==a.row.channelWei?"vipicongray":1==a.row.channelWei?"vipicon":""})]):e._e(),e._v(" "),"crateCardDateString"==t?s("div",[s("div",[e._v(" "+e._s(e._f("formatTimeYMD")(a.row.crateCardDateString))+" ")]),e._v(" "),s("div",[e._v(" "+e._s(e._f("formatTimeHMS")(a.row.crateCardDateString))+" ")])]):"createTime"==t?s("div",[s("div",[e._v(" "+e._s(e._f("formatTimeYMD")(a.row.createTime))+" ")]),e._v(" "),s("div",[e._v(" "+e._s(e._f("formatTimeHMS")(a.row.createTime))+" ")])]):"attentionDate"==t?s("div",[s("div",[e._v(e._s(e._f("formatTimeYMD")(a.row.attentionTime)))]),e._v(" "),s("div",[e._v(e._s(e._f("formatTimeHMS")(a.row.attentionTime)))])]):"costAll"==t?s("span",[e._v("\n                    "+e._s(a.row.costFee)+"\n                  ")]):"costTimes"==t?s("div",[s("div",[e._v(e._s(e._f("formatTimeYMD")(a.row.costTimes)))]),e._v(" "),s("div",[e._v(e._s(e._f("formatTimeHMS")(a.row.costTimes)))])]):"lastCostTime"==t?s("span",[e._v("\n                    "+e._s(a.row.lastCostTime)+"\n                  ")]):"lastCost"==t?s("span",[e._v("\n                    "+e._s(a.row.lastCost)+"\n                  ")]):"avgCost"==t?s("span",[e._v("\n                    "+e._s(a.row.avgCost)+"\n                  ")]):"avgNumber"==t?s("span",[e._v("\n                    "+e._s(a.row.avgNumber)+"\n                  ")]):"costCategory"==t?s("span",[e._v("\n                    "+e._s(a.row.costCategory)+"\n                  ")]):"discountRate"==t?s("span",[e._v("\n                    "+e._s(a.row.discountRate)+"\n                  ")]):"cancelAttentionTime"==t?s("div",[s("div",[e._v(" "+e._s(e._f("formatTimeYMD")(a.row.cancelAttentionTime))+" ")]),e._v(" "),s("div",[e._v(" "+e._s(e._f("formatTimeHMS")(a.row.cancelAttentionTime))+" ")])]):"age"==t?s("span",[e._v("\n                    "+e._s(a.row.age)+"\n                  ")]):"birthday"==t?s("span",[e._v("\n                    "+e._s(a.row.birthdayMD)+"\n                  ")]):"storedValueAll"==t?s("span",[e._v("\n                    "+e._s(a.row.storedValueAll)+"\n                  ")]):"storedValueCurrent"==t?s("span",[e._v("\n                    "+e._s(a.row.storedValueCurrent)+"\n                  ")]):"pointsAll"==t?s("span",[e._v("\n                    "+e._s(a.row.pointsAll)+"\n                  ")]):"pointsCurrent"==t?s("span",[e._v("\n                    "+e._s(a.row.pointsCurrent)+"\n                  ")]):"mainStoreName"==t?s("span",[e._v("\n                    "+e._s(a.row.mainStoreName)+"\n                  ")]):"createCardStoreName"==t?s("span",[e._v("\n                    "+e._s(a.row.openStoreName)+"\n                  ")]):"cardNo"==t?s("span",[e._v("\n                    "+e._s(a.row.cardNo)+"\n                  ")]):"highCost"==t?s("span",[e._v("\n                    "+e._s(a.row.highCost)+"\n                  ")]):"frozenStatus"==t?s("div",[0==a.row.frozenStatus?s("span",{staticClass:"dm-status--success"},[e._v("正常")]):e._e(),e._v(" "),1==a.row.frozenStatus?s("span",{staticClass:"dm-status--warning"},[e._v("冻结")]):e._e()]):e._e()]}}],null,!0)}:{attrs:{prop:t,label:e._f("formatField")(t),sortable:"custom",width:"200px"},scopedSlots:e._u([{key:"default",fn:function(a){return["name"==t?s("div",{staticClass:"tablecontent-cell",on:{click:function(t){return e.linkDetail(a.row.memberId)}}},[s("el-popover",{attrs:{placement:"top-start",width:"400",height:"180",trigger:"hover"},on:{show:function(t){return e.showSingleInfo(a.row.memberId)}}},[s("div",{staticClass:"pointer"},[s("div",{staticClass:"singelinfo"},[s("div",{staticClass:"singelinfo-img"},[s("img",{attrs:{width:"100",height:"100",src:a.row.thirdImgUrl?a.row.thirdImgUrl:"./static/img/default.png",alt:""}})]),e._v(" "),s("div",{staticClass:"singelinfo-content pLeft10 pRight10"},[s("span",{staticClass:"lheigth0"},[e._v(e._s(a.row.memberName)+"\n                              "),s("span",{staticClass:"channelicon fr",class:0==e.singleInfo.status?"gzhiconcanclegray":1==e.singleInfo.status?"gzhicon":"gzhicongray",attrs:{title:0==e.singleInfo.status?"取消关注公众号":1==e.singleInfo.status?"已关注公众号":"未关注公众号"}}),e._v(" "),s("span",{staticClass:"channelicon fr mr6",class:0==e.singleInfo.wxStatus?"xcxicongray":1==e.singleInfo.wxStatus?"xcxicon":"",attrs:{title:0==e.singleInfo.wxStatus?"未使用小程序":1==e.singleInfo.wxStatus?"使用过小程序":""}})]),e._v(" "),s("p",{staticClass:"lheigth0"},[s("span",{staticClass:"evl-right"},[e._v(e._s(e.singleInfo.sex)+" ")]),s("span",{staticClass:"evl-right"},[e._v(e._s(e.singleInfo.age)+" ")]),s("span",{attrs:{title:e.singleInfo.cardNo}},[e._v(e._s(e._f("formatCardName")(e.singleInfo.cardNo)))])]),e._v(" "),s("p",{staticClass:"lheigth0"},[s("span",[e._v(e._s(e.singleInfo.mainStoreName))])]),e._v(" "),s("div",{staticClass:"singelinfo-cost"},[s("div",{staticClass:"singelinfo-costitem"},[s("p",[e._v(e._s(e.singleInfo.costFee))]),e._v(" "),s("p",[e._v("消费总额")])]),e._v(" "),s("div",{staticClass:"singelinfo-costitem"},[s("p",[e._v(e._s(e.singleInfo.costTimes))]),e._v(" "),s("p",[e._v("消费次数")])]),e._v(" "),s("div",{staticClass:"singelinfo-costitem"},[s("p",[e._v(e._s(e.singleInfo.lastCost))]),e._v(" "),s("p",[e._v("最近消费")])])])])]),e._v(" "),s("div",{staticClass:"singelinfo-jl mBottom20 mTop20"},[s("a",{staticClass:"singelinfo-jlitem"},[e._v("消费记录 ("+e._s(e.singleInfo.numOfSale)+")")]),e._v(" "),s("a",{staticClass:"singelinfo-jlitem"},[e._v("营销记录 ("+e._s(e.singleInfo.numOfmarket)+")")]),e._v(" "),s("a",{staticClass:"singelinfo-jlitem"},[e._v("卡券记录 ("+e._s(e.singleInfo.couponCount)+")")])])]),e._v(" "),s("span",{staticClass:"member-span",attrs:{slot:"reference"},slot:"reference"},[s("img",{staticClass:"tablecontent-cellimg mr6",attrs:{width:"60",height:"60",src:a.row.thirdImgUrl?a.row.thirdImgUrl:"",alt:""}})])]),e._v(" "),s("span",{staticClass:"fix-block"},[e._v(e._s(e._f("formatMember")(a.row.memberName)))])],1):"grade"==t?s("span",[e._v(e._s(a.row.gradeName))]):"status"==t?s("span",[s("span",{staticClass:"channelicon",class:0==a.row.wxStatus?"xcxicongray":1==a.row.wxStatus?"xcxicon":"",attrs:{title:0==a.row.wxStatus?"未使用小程序":1==a.row.wxStatus?"已使用小程序":""}}),e._v(" "),s("span",{staticClass:"channelicon",class:0==a.row.status?"gzhiconcanclegray":1==a.row.Status?"gzhicon":"gzhicongray",attrs:{title:0==a.row.status?"取消关注公众号":1==a.row.status?"已关注公众号":"未关注公众号"}})]):"channel"==t?s("span",[s("span",{staticClass:"channelicon",class:0==a.row.channelTaobao?"taobaoicongray":1==a.row.channelTaobao?"taobaoicon":""}),e._v(" "),s("span",{staticClass:"channelicon",class:0==a.row.channelJd?"jdicongray":1==a.row.channelJd?"jdicon":""}),e._v(" "),s("span",{staticClass:"channelicon",class:0==a.row.channelWei?"vipicongray":1==a.row.channelWei?"vipicon":""})]):e._e(),e._v(" "),"crateCardDateString"==t?s("div",[s("div",[e._v(" "+e._s(e._f("formatTimeYMD")(a.row.crateCardDateString))+" ")]),e._v(" "),s("div",[e._v(" "+e._s(e._f("formatTimeHMS")(a.row.crateCardDateString))+" ")])]):"createTime"==t?s("div",[s("div",[e._v(" "+e._s(e._f("formatTimeYMD")(a.row.createTime))+" ")]),e._v(" "),s("div",[e._v(" "+e._s(e._f("formatTimeHMS")(a.row.createTime))+" ")])]):"attentionDate"==t?s("div",[s("div",[e._v(e._s(e._f("formatTimeYMD")(a.row.attentionTime)))]),e._v(" "),s("div",[e._v(e._s(e._f("formatTimeHMS")(a.row.attentionTime)))])]):"costAll"==t?s("span",[e._v("\n                    "+e._s(a.row.costFee)+"\n                  ")]):"costTimes"==t?s("span",[e._v("\n                    "+e._s(a.row.costTimes)+"\n                  ")]):"lastCostTime"==t?s("span",[e._v("\n                    "+e._s(a.row.lastCostTime)+"\n                  ")]):"lastCost"==t?s("span",[e._v("\n                    "+e._s(a.row.lastCost)+"\n                  ")]):"avgCost"==t?s("span",[e._v("\n                    "+e._s(a.row.avgCost)+"\n                  ")]):"avgNumber"==t?s("span",[e._v("\n                    "+e._s(a.row.avgNumber)+"\n                  ")]):"costCategory"==t?s("span",[e._v("\n                    "+e._s(a.row.costCategory)+"\n                  ")]):"discountRate"==t?s("span",[e._v("\n                    "+e._s(a.row.discountRate)+"\n                  ")]):"cancelAttentionTime"==t?s("div",[s("div",[e._v(" "+e._s(e._f("formatTimeYMD")(a.row.cancelAttentionTime))+" ")]),e._v(" "),s("div",[e._v(" "+e._s(e._f("formatTimeHMS")(a.row.cancelAttentionTime))+" ")])]):"age"==t?s("span",[e._v("\n                    "+e._s(a.row.age)+"\n                  ")]):"birthday"==t?s("span",[e._v("\n                    "+e._s(a.row.birthdayMD)+"\n                  ")]):"storedValueAll"==t?s("span",[e._v("\n                    "+e._s(a.row.storedValueAll)+"\n                  ")]):"storedValueCurrent"==t?s("span",[e._v("\n                    "+e._s(a.row.storedValueCurrent)+"\n                  ")]):"pointsAll"==t?s("span",[e._v("\n                    "+e._s(a.row.pointsAll)+"\n                  ")]):"pointsCurrent"==t?s("span",[e._v("\n                    "+e._s(a.row.pointsCurrent)+"\n                  ")]):"mainStoreName"==t?s("span",[e._v("\n                    "+e._s(a.row.mainStoreName)+"\n                  ")]):"createCardStoreName"==t?s("span",[e._v("\n                    "+e._s(a.row.openStoreName)+"\n                  ")]):"cardNo"==t?s("span",[e._v("\n                    "+e._s(a.row.cardNo)+"\n                  ")]):"costFeePaid"==t?s("span",[e._v("\n                    "+e._s(a.row.costFeePaid)+"\n                  ")]):"lastCostPaid"==t?s("span",[e._v("\n                    "+e._s(a.row.lastCostPaid)+"\n                  ")]):"highCost"==t?s("span",[e._v("\n                    "+e._s(a.row.highCost)+"\n                  ")]):"highCostPaid"==t?s("span",[e._v("\n                    "+e._s(a.row.highCostPaid)+"\n                  ")]):"frozenStatus"==t?s("div",[0==a.row.frozenStatus?s("span",{staticClass:"dm-status--success"},[e._v("正常")]):e._e(),e._v(" "),1==a.row.frozenStatus?s("span",{staticClass:"dm-status--warning"},[e._v("冻结")]):e._e()]):e._e()]}}],null,!0)})],1)}),e._v(" "),s("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[s("div",{staticClass:"operate"},[s("el-button",{attrs:{type:"text"},on:{click:function(s){return e.linkDetail(t.row.memberId)}}},[e._v("查看")])],1)]}}])})],2),e._v(" "),e.memberData.length>0?s("div",{staticClass:"page mTop20 mBottom40"},[s("el-pagination",{attrs:{background:"","current-page":e.page.currentPage,"page-sizes":[20,40,60,80],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next",total:e.page.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()],1)]),e._v(" "),s("el-dialog",{attrs:{title:"自定义字段列表",visible:e.dilogFieldVisible,width:"600px"},on:{"update:visible":function(t){e.dilogFieldVisible=t}}},[s("div",{staticClass:"checkwtip mBottom10"},[e._v("请选择您想显示的列表详细信息，最多勾选8个选项，已经勾选了 "),s("span",{staticClass:"curcheck"},[e._v(e._s(e.checkedFields.length))]),e._v(" 个")]),e._v(" "),s("el-checkbox-group",{attrs:{min:0,max:8},model:{value:e.checkedFields,callback:function(t){e.checkedFields=t},expression:"checkedFields"}},[s("div",{staticClass:"checkwrap"},e._l(e.memberFields,function(t,a){return s("div",{key:a,staticClass:"checkwrap-item lheigth30"},[s("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(e._f("formatFieldName")(t)))])],1)}),0)]),e._v(" "),s("span",{staticClass:"dilog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dilogFieldVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:e.submitFields}},[e._v("确 定")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"批量调整积分",visible:e.dilogIntegralVisible,width:"600px"},on:{"update:visible":function(t){e.dilogIntegralVisible=t},close:function(t){return e.closeIntegral("IntegralForm")}}},[s("el-form",{ref:"IntegralForm",attrs:{model:e.IntegralForm,rules:e.rules,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"调整积分",prop:"editType"}},[s("el-radio-group",{model:{value:e.IntegralForm.editType,callback:function(t){e.$set(e.IntegralForm,"editType",t)},expression:"IntegralForm.editType"}},[s("el-radio",{attrs:{label:1}},[e._v("增加积分")]),e._v(" "),s("el-radio",{attrs:{label:2}},[e._v("扣除积分")])],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"调整额度",prop:"accumulatPoints"}},[s("el-input-number",{staticStyle:{width:"400px"},attrs:{"controls-position":"right",min:1,max:999999},model:{value:e.IntegralForm.accumulatPoints,callback:function(t){e.$set(e.IntegralForm,"accumulatPoints",t)},expression:"IntegralForm.accumulatPoints"}})],1),e._v(" "),s("el-form-item",{attrs:{label:"原因备注",prop:"remark"}},[s("el-input",{attrs:{type:"textarea"},model:{value:e.IntegralForm.remark,callback:function(t){e.$set(e.IntegralForm,"remark",t)},expression:"IntegralForm.remark"}})],1),e._v(" "),"gic"==e.integralFlag&&1==e.IntegralForm.editType?s("el-form-item",{attrs:{label:"原始成本主体",prop:"settlementStoreId"}},[s("el-select",{staticStyle:{width:"400px"},attrs:{prop:"settlementStoreId",filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入原始成本主体","remote-method":e.handleKeyup,loading:e.loading},model:{value:e.IntegralForm.settlementStoreId,callback:function(t){e.$set(e.IntegralForm,"settlementStoreId",t)},expression:"IntegralForm.settlementStoreId"}},e._l(e.storeList,function(e){return s("el-option",{key:e.storeId,attrs:{label:e.storeName,value:e.storeId}})}),1),e._v(" "),s("p",{staticStyle:{color:"","font-size":"12px"}},[e._v("注：除输入选择具体门店选择外，还可输入总部，记总部名下。")])],1):e._e()],1),e._v(" "),s("div",{staticClass:"dilog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dilogIntegralVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitIntegral("IntegralForm")}}},[e._v("确 定")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"批量调整会员等级",visible:e.dilogGradeVisible,width:"600px"},on:{"update:visible":function(t){e.dilogGradeVisible=t}}},[s("el-form",{ref:"gradeForm",attrs:{model:e.gradeForm,rules:e.graderules,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"调整后等级",prop:"gradeId"}},[s("el-select",{staticStyle:{width:"400px"},attrs:{placeholder:"请选择"},model:{value:e.gradeForm.gradeId,callback:function(t){e.$set(e.gradeForm,"gradeId",t)},expression:"gradeForm.gradeId"}},e._l(e.memberGrade,function(e){return s("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),s("el-form-item",{attrs:{label:"原因备注",prop:"remark"}},[s("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea"},model:{value:e.gradeForm.remark,callback:function(t){e.$set(e.gradeForm,"remark",t)},expression:"gradeForm.remark"}})],1)],1),e._v(" "),s("div",{staticClass:"dilog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dilogGradeVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitGrade("gradeForm")}}},[e._v("确 定")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"修改主门店",visible:e.dilogMainstoreVisible,width:"600px"},on:{"update:visible":function(t){e.dilogMainstoreVisible=t}}},[s("el-form",{ref:"mainstoreForm",attrs:{model:e.mainstoreForm,rules:e.mainstorerules,"label-width":"120px"}},[s("el-form-item",{attrs:{label:"选择主门店",prop:"mainOptType"}},[s("el-radio-group",{on:{change:e.handleStore},model:{value:e.mainstoreForm.mainOptType,callback:function(t){e.$set(e.mainstoreForm,"mainOptType",t)},expression:"mainstoreForm.mainOptType"}},[s("p",{staticClass:"lheigth40"},[s("el-radio",{attrs:{label:1}},[e._v("替换为最新协管的门店 ")])],1),e._v(" "),s("p",{staticClass:"lheigth40"},[s("el-radio",{attrs:{label:2}},[e._v("替换为最新协管的自营门店")])],1),e._v(" "),s("p",{staticClass:"lheigth40"},[s("el-radio",{attrs:{label:3}},[e._v("替换为最新协管的自营/联营门店")])],1),e._v(" "),s("p",{staticClass:"lheigth40"},[s("el-radio",{attrs:{label:4}},[e._v("自定义主门店")]),e._v(" "),e.storeName?s("span",{staticClass:"member-store-name",on:{click:e.changeStore}},[e._v("\n                  "+e._s(e.storeName)+"\n                ")]):e._e()],1)])],1),e._v(" "),s("el-form-item",{attrs:{label:"原因备注",prop:"remark"}},[s("el-input",{staticStyle:{width:"400px"},attrs:{type:"textarea"},model:{value:e.mainstoreForm.remark,callback:function(t){e.$set(e.mainstoreForm,"remark",t)},expression:"mainstoreForm.remark"}})],1)],1),e._v(" "),s("div",{staticClass:"dilog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dilogMainstoreVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitMainStore("mainstoreForm")}}},[e._v("确 定")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"批量修改协管门店",visible:e.dilogSubStoreVisible,width:"800px"},on:{"update:visible":function(t){e.dilogSubStoreVisible=t}}},[s("el-form",{ref:"storeForm",attrs:{model:e.storeForm,rules:e.storerules,"label-width":"120px"}},[s("p",{staticClass:"ml15"},[e._v("当前选择"+e._s(e.multipleList.length)+"个会员")]),e._v(" "),s("el-form-item",{attrs:{label:"选择协管门店",prop:"subOptType"}},[s("el-radio",{attrs:{label:1},on:{change:e.changeSubStore},model:{value:e.storeForm.subOptType,callback:function(t){e.$set(e.storeForm,"subOptType",t)},expression:"storeForm.subOptType"}},[e._v("增加协管门店\n              "),s("span",{staticStyle:{color:"#000"}},[e._v(e._s(e.storeForm.addSubStoreName))]),e._v(" "),1==e.storeForm.subOptType?s("span",{staticClass:"pointer",staticStyle:{color:"#000"},on:{click:e.changeStore}},[e._v("选择门店")]):e._e()]),e._v(" "),s("p",[s("el-radio",{attrs:{label:2},on:{change:e.changeSubStore},model:{value:e.storeForm.subOptType,callback:function(t){e.$set(e.storeForm,"subOptType",t)},expression:"storeForm.subOptType"}},[e._v("将协管门店")]),e._v(" "),s("el-select",{attrs:{placeholder:"请选择",disabled:2!=e.storeForm.subOptType},model:{value:e.storeForm.premodefiySubStoreId,callback:function(t){e.$set(e.storeForm,"premodefiySubStoreId",t)},expression:"storeForm.premodefiySubStoreId"}},e._l(e.subStoreList,function(e){return s("el-option",{key:e.storeId,attrs:{label:e.storeName,value:e.storeId}})}),1),e._v("\n              修改为 "+e._s(e.storeForm.modefiySubStoreName)),2==e.storeForm.subOptType?s("span",{staticClass:"pointer",on:{click:e.changeStore}},[e._v("选择门店")]):e._e()],1),e._v(" "),s("el-radio",{attrs:{label:3},on:{change:e.changeSubStore},model:{value:e.storeForm.subOptType,callback:function(t){e.$set(e.storeForm,"subOptType",t)},expression:"storeForm.subOptType"}},[e._v("将协管门店\n              "),s("el-select",{attrs:{placeholder:"请选择",disabled:3!=e.storeForm.subOptType},model:{value:e.storeForm.deleteSubStoreId,callback:function(t){e.$set(e.storeForm,"deleteSubStoreId",t)},expression:"storeForm.deleteSubStoreId"}},e._l(e.subStoreList,function(e){return s("el-option",{key:e.storeId,attrs:{label:e.storeName,value:e.storeId}})}),1),s("span",{staticStyle:{color:"#000",cursor:"default"}},[e._v(" 删除")])],1)],1),e._v(" "),s("el-form-item",{attrs:{label:"原因备注",prop:"remark"}},[s("el-input",{attrs:{type:"textarea"},model:{value:e.storeForm.remark,callback:function(t){e.$set(e.storeForm,"remark",t)},expression:"storeForm.remark"}})],1)],1),e._v(" "),s("div",{staticClass:"dilog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dilogSubStoreVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitStore("storeForm")}}},[e._v("确 定")])],1)],1),e._v(" "),s("el-dialog",{attrs:{title:"查看批量处理进度",visible:e.dilogProcessVisible,width:"600px"},on:{"update:visible":function(t){e.dilogProcessVisible=t},close:e.closeProcess}},[e._l(e.processList,function(t,a){return s("div",{key:a,staticClass:"process"},[s("span",{staticClass:"process-name"},[e._v(e._s(t.name))]),s("span",{staticClass:"process-status"},[s("el-progress",{attrs:{percentage:e._f("formatProcess")(t)}})],1)])}),e._v(" "),e.processList.length<=0?s("p",[e._v("暂无批量处理")]):e._e(),e._v(" "),s("span",{staticClass:"dilog-footer",attrs:{slot:"footer"},slot:"footer"},[s("el-button",{on:{click:function(t){e.dilogProcessVisible=!1}}},[e._v("取 消")]),e._v(" "),s("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dilogProcessVisible=!1}}},[e._v("确 定")])],1)],2),e._v(" "),s("vue-gic-store",{attrs:{projectName:e.projectName,showStoreDialog:e.showStoreDialog,selectId:e.selectId},on:{selectStore:e.selectStore}})],1)],1),e._v(" "),s("div",{staticClass:"foot-add"},[s("vue-gic-footer")],1)])},staticRenderFns:[]};var F=s("VU/8")(S,C,!1,function(e){s("s60o")},null,null);t.default=F.exports},s60o:function(e,t){}});