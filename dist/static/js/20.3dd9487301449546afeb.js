webpackJsonp([20],{SWaY:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Dd8w"),r=a.n(s),i=a("fZjL"),o=a.n(i),n=a("UXnk"),l=a("+vdD"),c=a("WSiR"),m=a("AKaA"),d=a("NTL1"),u=a("8V46"),g=a("oAV5"),p=a("SJI6"),h=[],f={name:"posmembers",data:function(){return{popWidth:450,isdot:!1,load:!0,toggleTag:!1,sceneValue:"member",navpath:[{name:"首页",path:""},{name:"POS会员",path:""}],memberSearchStr:-1,tableData:[],base:!1,pageName:"posMember",page:{currentPage:1,pageSize:20,totalCount:0},memberData:[],memberFields:[],sortColName:"",sortType:"desc",phoneNameCard:"",fieldsStr:[],dialogFieldVisible:!1,checkedFields:[],multipleList:[],selectAll:!1,batchValue:"",dialogIntegralVisible:!1,IntegralForm:{editType:1,accumulatPoints:0,remark:"",settlementStoreId:""},storeList:[],loading:!1,rules:{editType:[{required:!0,message:"请选择调整方式",trigger:"change"}],accumulatPoints:[{required:!0,message:"请选择调整额度",trigger:"change"}],remark:[{required:!0,message:"请输入原因备注",trigger:"change"}],settlementStoreId:[{required:!0,message:"请输入成本主体",trigger:"change"}]},dialogGradeVisible:!1,gradeForm:{gradeId:"",remark:""},memberGrade:[],graderules:{gradeId:[{required:!0,message:"请选择等级",trigger:"change"}],remark:[{required:!0,message:"请输入原因备注",trigger:"change"}]},mainstorerules:{remark:[{required:!0,message:"请输入原因备注",trigger:"change"}]},projectName:"member",showStoreDilog:!1,dialogMainstoreVisible:!1,mainstoreForm:{remark:"",optType:1,mainOptType:1,mainStoreId:""},storeName:"",dialogProcessVisible:!1,processList:[],timer:null,dialogSubStoreVisible:!1,storeForm:{remark:"",optType:2,subOptType:1,fromSubStoreId:"",toSubStoreId:"",phoneNameCard:"",premodefiySubStoreId:"",modefiySubStoreId:"",deleteSubStoreId:"",addSubStoreId:"",modefiySubStoreName:"",addSubStoreName:""},storerules:{remark:[{required:!0,message:"请输入原因备注",trigger:"change"}]},subStoreList:[],singleInfo:{sex:0,age:0,cardNo:0,mainStoreName:"dd",costFee:0,costTimes:0,lastCost:0,numOfSale:0,numOfmarket:0,couponCount:0,status:0,wxStatus:0,phoneStatus:0,authStatus:0},integralFlag:""}},computed:r()({},Object(p.mapState)(["storeImageUrl"])),filters:{formatTimeYMD:function(e){return"--"!=e?e.split(" ")[0]:"--"},formatTimeHMS:function(e){return"--"!=e?e.split(" ")[1]:"--"},filterCarNo:function(e){return e?e.length>10?e.slice(0,10)+"...":e:"--"},formatField:function(e){var t="";return"name"==e&&(t="基本信息"),"grade"==e&&(t="会员等级"),"status"==e&&(t="状态"),"channel"==e&&(t="关联渠道"),"crateCardDateString"==e&&(t="开卡时间"),"createTime"==e&&(t="新增时间"),"attentionDate"==e&&(t="关注时间"),"costFeePaid"==e&&(t="消费总额(实付)"),"costTimes"==e&&(t="消费次数"),"lastCostTime"==e&&(t="最近消费时间"),"lastCostPaid"==e&&(t="最近消费(实付)"),"avgCost"==e&&(t="客单价"),"avgNumber"==e&&(t="连带率"),"costCategory"==e&&(t="消费品类"),"discountRate"==e&&(t="平均折扣"),"cancelAttentionTime"==e&&(t="取关时间"),"age"==e&&(t="年龄"),"birthday"==e&&(t="生日"),"storedValueAll"==e&&(t="储值总额"),"storedValueCurrent"==e&&(t="储值余额"),"pointsAll"==e&&(t="累计积分"),"pointsCurrent"==e&&(t="积分余额"),"mainStoreName"==e&&(t="主门店"),"createCardStoreName"==e&&(t="开卡门店"),"cardNo"==e&&(t="会员卡号"),"frozenStatus"==e&&(t="会员状态"),"costAll"==e&&(t="消费总额(应收)"),"lastCost"==e&&(t="最近消费(应收)"),"highCostPaid"==e&&(t="最高单笔(实付)"),"highCost"==e&&(t="最高单笔(应收)"),t},formatFieldName:function(e){var t=h.findIndex(function(t){return t.code==e});return h[t].name},formatMember:function(e){return e&&e.length>3&&(e=e.substr(0,3)+"..."),e},formatProcess:function(e){var t=100*e.finishCount/e.taskCount,a=parseFloat(t);if(!isNaN(a))return a=Math.round(100*t)/100}},watch:{processList:function(e,t){var a=this;if(e.length<=0){clearInterval(this.timer),this.getAjaxMembers()}else{clearInterval(this.timer),this.timer=setInterval(function(){a.getProcessList()},5e3)}},phoneNameCard:function(e){sessionStorage.setItem("posPhoneNameCard",e)}},activated:function(){this.$store.commit("mutations-slide",!0)},methods:{getData:function(){this.$refs.peopleFilter.confirmSet()},findFilter:function(e){this.memberSearchStr=e||-1,this.page.pageSize=20,this.page.currentPage=1,this.getAjaxMembers()},cancelFilter:function(){this.$refs.peopleFilter.cancelSet()},editShow:function(){this.toggleTag=!0},editHide:function(){this.toggleTag=!1},hideBtn:function(){this.toggleTag=!1,this.getAjaxMembers()},saveTempData:function(){},formatTime:function(e){var t=new Date(e);return t.getFullYear()+"-"+((t.getMonth()+1<10?"0"+(t.getMonth()+1):t.getMonth()+1)+"-")+((t.getDate()<10?"0"+t.getDate():t.getDate())+" ")+((t.getHours()<10?"0"+t.getHours():t.getHours())+":")+((t.getMinutes()<10?"0"+t.getMinutes():t.getMinutes())+":")+(t.getSeconds()<10?"0"+t.getSeconds():t.getSeconds())},linkDetail:function(e){this.$router.push({path:"/posmemberDetail",query:{memberId:e}})},showSingleInfo:function(e){var t=this;this.singleInfo="",Object(m.a)(d.a.singleInfo,{memberId:e}).then(function(e){if(0===e.data.errorCode){var a=e.data.result.memberSingle;t.singleInfo=r()({},a,{sex:0==a.sex?"性别未知":1==a.sex?"男":"女",age:0!=a.age?a.age:"年龄未知",cardNo:a.cardNo?a.cardNo:"无会员卡",mainStoreName:a.mainStoreName?a.mainStoreName:"主门店未知"})}else Object(u.a)(e.data.message)}).catch(function(e){Object(u.b)(e)})},changeSubStore:function(){1==this.storeForm.subOptType&&(this.storeForm.modefiySubStoreName="",this.storeForm.modefiySubStoreId="",this.storeForm.deleteSubStoreId=""),2==this.storeForm.subOptType&&(this.storeForm.addSubStoreName="",this.storeForm.addSubStoreId="",this.storeForm.deleteSubStoreId=""),3==this.storeForm.subOptType&&(this.storeForm.addSubStoreName="",this.storeForm.addSubStoreId="",this.storeForm.modefiySubStoreName="",this.storeForm.modefiySubStoreId="")},submitStore:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return!1;var s=[];if(!(t.multipleList.length>0))return Object(u.a)("会员不能为空"),!1;if(t.multipleList.forEach(function(e){s.push(e.memberId)}),1==t.storeForm.subOptType){if(""==t.storeForm.addSubStoreId)return Object(u.a)("请选择新增协管门店"),!1;t.storeForm.fromSubStoreId=t.storeForm.addSubStoreId}if(2==t.storeForm.subOptType){if(""==t.storeForm.premodefiySubStoreId)return Object(u.a)("请选择协管门店"),!1;if(""==t.storeForm.modefiySubStoreId)return Object(u.a)("请选择要修改后的协管门店"),!1;t.storeForm.fromSubStoreId=t.storeForm.premodefiySubStoreId,t.storeForm.toSubStoreId=t.storeForm.modefiySubStoreId}3==t.storeForm.subOptType&&(t.storeForm.fromSubStoreId=t.storeForm.deleteSubStoreId),Object(m.a)(d.a.updateStore,{memberIds:1==t.selectAll?"-1":s.join(","),remark:t.storeForm.remark,isCurrent:1==t.selectAll?2:t.multipleList.length==t.page.pageSize?1:0,optType:t.storeForm.optType,subOptType:t.storeForm.subOptType,fromSubStoreId:t.storeForm.fromSubStoreId,toSubStoreId:2==t.storeForm.subOptType?t.storeForm.toSubStoreId:"",memberSearchParamStr:1==t.selectAll?t.memberSearchStr?t.memberSearchStr:"-1":"",phoneNameCard:t.phoneNameCard}).then(function(a){if(t.$refs[e].resetFields(),0!==a.data.errorCode)return Object(u.a)(a.data.message),t.dialogSubStoreVisible=!1,!1;Object(u.c)(),t.dialogSubStoreVisible=!1}).then(function(){setTimeout(function(){t.getProcessList()},5e3)}).catch(function(a){Object(u.b)(a),t.dialogSubStoreVisible=!1,t.$refs[e].resetFields()})})},getSubStoreList:function(){var e=this,t=[];if(!(this.multipleList.length>0))return Object(u.a)("会员不能为空"),!1;this.multipleList.forEach(function(e){t.push(e.memberId)}),Object(m.a)(d.a.membersSubStoreList,{memberIds:t.join(","),isCurrent:1==this.selectAll?2:this.multipleList.length==this.page.pageSize?1:0,memberSearchParamStr:"-1",phoneNameCard:this.phoneNameCard}).then(function(t){0===t.data.errorCode?e.subStoreList=t.data.result.storeList:Object(u.a)(t.data.message)}).catch(function(e){Object(u.b)(e)})},closeProcess:function(){clearInterval(this.timer)},getBatchProcess:function(){this.dialogProcessVisible=!0},callProcess:function(){this.getProcessList()},getProcessList:function(){var e=this;Object(m.a)(d.a.batchProcess).then(function(t){0===t.data.errorCode?(e.isdot=t.data.result.list.length>0,e.popWidth=e.isdot?e.popWidth:160,e.processList=t.data.result.list.map(function(e){return r()({},e,{name:e.name?e.name:"未知"})})):Object(u.a)(t.data.message)}).catch(function(e){Object(u.b)(e)})},submitMainStore:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return!1;var s=[];return t.multipleList.length>0?(t.multipleList.forEach(function(e){s.push(e.memberId)}),4==t.mainstoreForm.mainOptType&&""==t.mainstoreForm.mainStoreId?(Object(u.a)("自定义门店不能为空"),!1):void Object(m.a)(d.a.updateStore,{memberIds:1==t.selectAll?"-1":s.join(","),remark:t.mainstoreForm.remark,isCurrent:1==t.selectAll?2:t.multipleList.length==t.page.pageSize?1:0,optType:t.mainstoreForm.optType,mainOptType:t.mainstoreForm.mainOptType,mainStoreId:t.mainstoreForm.mainStoreId,memberSearchParamStr:1==t.selectAll?t.memberSearchStr?t.memberSearchStr:"-1":"",phoneNameCard:t.phoneNameCard}).then(function(a){if(t.$refs[e].resetFields(),t.storeName="",0!==a.data.errorCode)return Object(u.a)(a.data.message),t.dialogMainstoreVisible=!1,!1;Object(u.c)(),t.dialogMainstoreVisible=!1,t.sortColName="",t.sortType="desc",t.phoneNameCard=""}).then(function(){setTimeout(function(){t.getProcessList()},5e3)}).catch(function(a){Object(u.b)(a),t.dialogMainstoreVisible=!1,t.$refs[e].resetFields()})):(Object(u.a)("会员不能为空"),!1)})},handleStore:function(){4==this.mainstoreForm.mainOptType&&(this.showStoreDilog=!0),4!==this.mainstoreForm.mainOptType&&(this.mainstoreForm.mainStoreId="",this.storeName="")},changeStore:function(){this.showStoreDilog=!0},selectStore:function(e){o()(e).length>0&&("mainstore"==this.batchValue&&(this.mainstoreForm.mainStoreId=e.storeId,this.storeName=e.storeName,this.mainstoreForm.mainOptType=4),"store"==this.batchValue&&(1===this.storeForm.subOptType&&(this.storeForm.addSubStoreId=e.storeId,this.storeForm.addSubStoreName=e.storeName),2===this.storeForm.subOptType&&(this.storeForm.modefiySubStoreId=e.storeId,this.storeForm.modefiySubStoreName=e.storeName))),this.showStoreDilog=!1},submitGrade:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return!1;var s=[];if(!(t.multipleList.length>0))return Object(u.a)("会员不能为空"),!1;t.multipleList.forEach(function(e){s.push(e.memberId)}),Object(m.a)(d.a.updateGrade,{memberIds:1==t.selectAll?"-1":s.join(","),remark:t.gradeForm.remark,gradeId:t.gradeForm.gradeId,isCurrent:1==t.selectAll?2:t.multipleList.length==t.page.pageSize?1:0,memberSearchParamStr:1==t.selectAll?t.memberSearchStr?t.memberSearchStr:"-1":"",phoneNameCard:t.phoneNameCard,pageName:t.pageName}).then(function(a){if(t.$refs[e].resetFields(),0!==a.data.errorCode)return Object(u.a)(a.data.message),t.dialogGradeVisible=!1,!1;Object(u.c)(),t.dialogGradeVisible=!1,t.getAjaxMembers()}).then(function(){setTimeout(function(){t.getProcessList()},5e3)}).catch(function(a){Object(u.b)(a),t.dialogGradeVisible=!1,t.$refs[e].resetFields()})})},getGradeList:function(){var e=this;Object(m.a)(d.a.gradeList).then(function(t){if(0!==t.data.errorCode)return Object(u.a)(t.data.message),!1;e.memberGrade=t.data.result}).catch(function(e){Object(u.b)(e)})},closeGrade:function(e){this.$refs[e]&&this.$refs[e].resetFields()},getEnterpriseInfo:function(){var e=this;Object(m.a)(d.a.enterpriseInfo).then(function(t){0==t.data.errorCode?e.integralFlag=t.data.result.enterpriseInfo.integralFlag:Object(u.a)()}).catch(function(e){Object(u.b)(e)})},closeIntegral:function(e){this.IntegralForm.settlementStoreId="",this.$refs[e]&&this.$refs[e].resetFields()},submitIntegral:function(e){var t=this;this.$refs[e].validate(function(a){if(!a)return!1;var s=[];if(!(t.multipleList.length>0))return Object(u.a)("会员不能为空"),!1;t.multipleList.forEach(function(e){s.push(e.memberId)}),Object(m.a)(d.a.updateIntegrals,{memberIds:1==t.selectAll?"-1":s.join(","),remark:t.IntegralForm.remark,accumulatPoints:t.IntegralForm.accumulatPoints,editType:t.IntegralForm.editType,settlementStoreId:t.IntegralForm.settlementStoreId,isCurrent:1==t.selectAll?2:t.multipleList.length==t.page.pageSize?1:0,memberSearchParamStr:1==t.selectAll?t.memberSearchStr?t.memberSearchStr:"-1":"",phoneNameCard:t.phoneNameCard,pageName:t.pageName}).then(function(a){return t.$refs[e]&&t.$refs[e].resetFields(),0===a.data.errorCode?(Object(u.c)(),!0):(Object(u.a)(),!1)}).then(function(e){t.IntegralForm.settlementStoreId="",t.dialogIntegralVisible=!1,e&&setTimeout(function(){t.getProcessList()},5e3)}).catch(function(a){Object(u.b)(a),t.dialogIntegralVisible=!1,t.$refs[e].resetFields()})})},handleKeyup:function(e){this.getStoreCodeName(e)},getStoreCodeName:function(e){var t=this;""!=e?Object(m.b)(d.a.storeCodeName,{searchParam:e,flag:1}).then(function(e){0===e.data.errorCode?t.storeList=e.data.result:Object(u.a)(e.data.message)}).catch(function(e){Object(u.b)(e)}):Object(u.a)("门店参数不存在！")},handleVisibleBatch:function(e){if(this.multipleList.length<1)return this.batchValue="",Object(u.a)("请勾选会员"),!1;e||("integral"==this.batchValue&&(this.dialogIntegralVisible=!0,this.getEnterpriseInfo(),this.$refs.IntegralForm&&this.$refs.IntegralForm.resetFields()),"grade"==this.batchValue&&(this.dialogGradeVisible=!0,this.getGradeList(),this.$refs.gradeForm&&this.$refs.gradeForm.resetFields()),"mainstore"==this.batchValue&&(this.dialogMainstoreVisible=!0,this.$refs.mainstoreForm&&this.$refs.mainstoreForm.resetFields(),this.storeName=""),"store"==this.batchValue&&(this.dialogSubStoreVisible=!0,this.$refs.storeForm&&this.$refs.storeForm.resetFields(),this.getSubStoreList()))},handleFocusBatch:function(){if(this.multipleList.length<1)return this.batchValue="",Object(u.a)("请勾选会员"),!1},selectAllmultipleList:function(){var e=this;this.selectAll=!this.selectAll,this.selectAll?this.memberData.forEach(function(t){e.$refs.multipleTable.toggleRowSelection(t,!0)}):this.$refs.multipleTable.clearSelection()},handleCurrentChange:function(e){this.page.currentPage=e,this.page.pageSize=20,sessionStorage.setItem("poscurrentPage",e),this.getAjaxMembers()},handleSizeChange:function(e){this.page.pageSize=e,this.page.currentPage=1,this.getAjaxMembers()},sortChange:function(e,t,a){this.sortColName=e.prop,"descending"===e.order&&(this.sortType="desc"),"ascending"===e.order&&(this.sortType="asc"),this.getAjaxMembers()},submitFields:function(){var e=this,t="";this.checkedFields.length>0&&(t=this.checkedFields.join(",")),Object(m.a)(d.a.updateFields,{pageName:this.pageName,fields:t}).then(function(t){0===t.data.errorCode?(Object(u.c)(),e.memberData=[],e.fieldsStr=[],e.getAjaxMembers()):Object(u.a)(t.data.message),e.dialogFieldVisible=!1}).catch(function(t){Object(u.b)(t),e.dialogFieldVisible=!1})},handleMemberFields:function(){this.dialogFieldVisible=!0,this.checkedFields=[],this.memberFields=[],h=[],this.getFindMemberFields()},getFindMemberFields:function(){var e=this;Object(m.a)(d.a.findMemberFields,{pageName:this.pageName}).then(function(t){if(0===t.data.errorCode){var a=t.data.result;h=a,a.forEach(function(t){t.check&&e.checkedFields.push(t.code),e.memberFields.push(t.code)})}else Object(u.a)(t.data.message)}).catch(function(e){Object(u.b)(e)})},getAjaxMembers:function(){var e=this;this.memberData=[],Object(m.a)(d.a.ajaxMembers,{sortColName:this.sortColName,sortType:this.sortType,phoneNameCard:this.phoneNameCard,pageSize:this.page.pageSize,currentPage:this.page.currentPage,memberSearchStr:this.memberSearchStr,pageName:this.pageName,showFields:"-1"}).then(function(t){if(e.load=!0,0===t.data.errorCode){if(e.load=!1,t.data.result.fieldsStr){e.fieldsStr=t.data.result.fieldsStr.split(","),e.fieldsStr=e.fieldsStr.filter(function(e){return""!==e});for(var a=0;a<e.fieldsStr.length;a++)e.fieldsStr[a].indexOf("Receivable")>-1&&(e.fieldsStr.splice(a,1),a--)}e.memberData=t.data.result.page.result.map(function(t){return r()({},t,{avgNumber:t.avgNumber.toFixed(2),lastCostTime:-1!=t.lastCostTime?Object(g.a)(t.lastCostTime,2):"--",createTime:-1!=t.createTime?Object(g.a)(t.createTime,1):"--",attentionDate:-1!=t.attentionDate?Object(g.a)(t.attentionDate,1):"--",cancelAttentionTime:-1!=t.cancelAttentionTime?Object(g.a)(t.cancelAttentionTime,2):"--",attentionTime:-1!=t.attentionTime?Object(g.a)(t.attentionTime,1):"--",crateCardDateString:-1!=t.crateCardDateString?Object(g.a)(t.crateCardDateString,1):"--",birthdayMD:0!=t.birthdayMD?Object(g.c)(t.birthdayMD):"--",thirdImgUrl:t.thirdImgUrl?t.thirdImgUrl:e.storeImageUrl})}),e.page.currentPage=t.data.result.page.currentPage,e.page.totalCount=t.data.result.page.totalCount}else e.load=!1,Object(u.a)(t.data.message)}).catch(function(e){Object(u.b)(e)})},formatLongTime:function(e){return e.substr(0,4)+"-"+e.substr(4,2)+"-"+e.substr(6,2)+" "+e.substr(8,2)+":"+e.substr(10,2)+":"+e.substr(12,2)},handleSelectionChange:function(e){this.multipleList=e},handleSearch:function(e){this.phoneNameCard=e.target.value,this.page.currentPage=1,this.getAjaxMembers()}},created:function(){this.storeImageUrl||this.$store.dispatch("getStorePicture"),this.getProcessList(),this.phoneNameCard=sessionStorage.getItem("posphoneNameCard")?sessionStorage.getItem("posphoneNameCard"):"",this.page.currentPage=sessionStorage.getItem("poscurrentPage")?sessionStorage.getItem("poscurrentPage"):1,this.getEnterpriseInfo()},beforeMount:function(){this.getAjaxMembers()},components:{searchinput:n.a,Navbar:l.a,NavPath:c.a}},b=r()({},f),v={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"pos-gic"},[a("div",{staticClass:"min100"},[a("nav-path",{attrs:{navpath:e.navpath}}),e._v(" "),a("div",{staticClass:"posmember-part"},[a("div",{staticClass:"gic-people"},[a("h2",{staticClass:"adpot-container"},[e._v("\n          适用人群\n        ")]),e._v(" "),a("div",{staticClass:"people-box"},[a("vue-gic-people",{ref:"peopleFilter",attrs:{projectName:e.projectName,sceneValue:e.sceneValue},on:{findFilter:e.findFilter,editHide:e.editHide,editShow:e.editShow,hideBtn:e.hideBtn}}),e._v(" "),e.toggleTag?a("div",{staticClass:"people-button"},[a("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.getData}},[e._v("确定")]),e._v(" "),a("el-button",{attrs:{size:"small"},on:{click:e.cancelFilter}},[e._v("取消")])],1):e._e()],1)]),e._v(" "),a("div",{staticClass:"handler"},[e.multipleList.length==e.page.pageSize?a("p",{staticClass:"multiple"},[0==e.selectAll?a("span",[e._v("已勾选本页 "+e._s(e.multipleList.length)+" 个会员，")]):a("span",[e._v("已勾选 "+e._s(e.page.totalCount)+" 个会员，")]),e._v(" "),0==e.selectAll?a("span",{staticClass:"multiple-all pointer",on:{click:e.selectAllmultipleList}},[e._v("勾选全部 "+e._s(e.page.totalCount)+" 个会员")]):a("span",{staticClass:"multiple-all pointer",on:{click:e.selectAllmultipleList}},[e._v("取消勾选")])]):e._e(),e._v(" "),a("div",{staticClass:"handler-search"},[e._v("\n          会员共"+e._s(e.page.totalCount)+"人\n          "),e._v(" "),a("el-input",{staticStyle:{width:"249px"},attrs:{placeholder:"输入会员姓名/昵称/手机号码",maxlength:"32",clearable:""},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.handleSearch(t)}},model:{value:e.phoneNameCard,callback:function(t){e.phoneNameCard=t},expression:"phoneNameCard"}},[a("i",{staticClass:"el-input__icon el-icon-search",attrs:{slot:"prefix"},slot:"prefix"})]),e._v(" "),a("div",{staticClass:"handler-setting"},[a("el-select",{staticStyle:{width:"120px"},attrs:{placeholder:"批量操作"},on:{change:e.handleFocusBatch,"visible-change":e.handleVisibleBatch},model:{value:e.batchValue,callback:function(t){e.batchValue=t},expression:"batchValue"}},[a("el-option",{key:"integral",attrs:{label:"调整积分",value:"integral"}}),e._v(" "),a("el-option",{key:"grade",attrs:{label:"调整会员等级",value:"grade"}})],1),e._v(" "),a("el-button",{staticStyle:{width:"32px","line-height":"30px",padding:"0px",margin:"0 5px"},attrs:{type:"primary",icon:"el-icon-setting"},on:{click:e.handleMemberFields}}),e._v(" "),a("el-popover",{attrs:{placement:"top-start",width:e.popWidth,trigger:"hover"},on:{show:e.callProcess}},[e.processList.length>0?a("div",e._l(e.processList,function(t,s){return a("div",{key:s},[a("span",{staticClass:"process-span"},[e._v(e._s(t.name))]),e._v(" "),a("div",{staticStyle:{display:"inline-block",width:"300px"}},[a("el-progress",{attrs:{percentage:0==t.taskCount?100:+(100*t.finishCount/t.taskCount).toFixed(2)}})],1)])}),0):a("div",{staticStyle:{"text-align":"center"}},[e._v("\n                暂无批量处理数据\n              ")]),e._v(" "),a("el-badge",{staticClass:"item",attrs:{slot:"reference","is-dot":e.isdot},slot:"reference"},[a("el-button",{staticStyle:{width:"32px","line-height":"30px",padding:"0px"},attrs:{type:"primary",icon:"el-icon-time"}})],1)],1)],1)],1),e._v(" "),a("div",{staticClass:"tablecontent"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.load,expression:"load"}],ref:"multipleTable",attrs:{data:e.memberData,"tooltip-effect":"dark"},on:{"selection-change":e.handleSelectionChange,"sort-change":e.sortChange}},[a("el-table-column",{attrs:{type:"selection",width:"50",fixed:""}}),e._v(" "),e._l(e.fieldsStr,function(t,s){return a("div",{key:s},[a("el-table-column","name"==t||"grade"==t||"status"==t||"channel"==t||"frozenStatus"==t?{attrs:{fixed:"name"===t,width:"name"==t?"150":"",prop:t,label:e._f("formatField")(t)},scopedSlots:e._u([{key:"default",fn:function(s){return["name"==t?a("div",{staticClass:"tablecontent-cell",on:{click:function(t){return e.linkDetail(s.row.memberId)}}},[a("el-popover",{attrs:{placement:"top-start",width:"400",height:"180",trigger:"hover"},on:{show:function(t){return e.showSingleInfo(s.row.memberId)}}},[a("div",{staticClass:"pointer"},[a("div",{staticClass:"singelinfo"},[a("div",{staticClass:"singelinfo-img"},[a("img",{attrs:{width:"100",height:"100",src:s.row.thirdImgUrl?s.row.thirdImgUrl:"./static/img/default.png",alt:""}})]),e._v(" "),a("div",{staticClass:"singelinfo-content pLeft10 pRight10"},[a("span",{staticClass:"lheigth0"},[e._v(e._s(s.row.memberName)+"\n                              "),a("span",{staticClass:"channelicon fr",class:0==e.singleInfo.status?"gzhiconcanclegray":1==e.singleInfo.status?"gzhicon":"gzhicongray",attrs:{title:0==e.singleInfo.status?"取消关注公众号":1==e.singleInfo.status?"已关注公众号":"未关注公众号"}}),e._v(" "),a("span",{staticClass:"channelicon fr mr6",class:0==e.singleInfo.wxStatus?"xcxicongray":1==e.singleInfo.wxStatus?"xcxicon":"",attrs:{title:0==e.singleInfo.wxStatus?"未使用小程序":1==e.singleInfo.wxStatus?"使用过小程序":""}})]),e._v(" "),a("p",{staticClass:"lheigth0"},[a("span",{staticClass:"evl-right"},[e._v(e._s(e.singleInfo.sex))]),a("span",{staticClass:"evl-right"},[e._v(e._s(e.singleInfo.age))]),a("span",{attrs:{title:e.singleInfo.cardNo}},[e._v(e._s(e._f("filterCarNo")(e.singleInfo.cardNo)))])]),e._v(" "),a("p",{staticClass:"lheigth0"},[a("span",[e._v(e._s(e.singleInfo.mainStoreName))])]),e._v(" "),a("div",{staticClass:"singelinfo-cost"},[a("div",{staticClass:"singelinfo-costitem"},[a("p",[e._v(e._s(e.singleInfo.costFee))]),e._v(" "),a("p",[e._v("消费总额")])]),e._v(" "),a("div",{staticClass:"singelinfo-costitem"},[a("p",[e._v(e._s(e.singleInfo.costTimes))]),e._v(" "),a("p",[e._v("消费次数")])]),e._v(" "),a("div",{staticClass:"singelinfo-costitem"},[a("p",[e._v(e._s(e.singleInfo.lastCost))]),e._v(" "),a("p",[e._v("最近消费")])])])])]),e._v(" "),a("div",{staticClass:"singelinfo-jl mBottom20 mTop20"},[a("a",{staticClass:"singelinfo-jlitem"},[e._v("消费记录 ("+e._s(e.singleInfo.numOfSale)+")")]),e._v(" "),a("a",{staticClass:"singelinfo-jlitem"},[e._v("营销记录 ("+e._s(e.singleInfo.numOfmarket)+")")]),e._v(" "),a("a",{staticClass:"singelinfo-jlitem"},[e._v("卡券记录 ("+e._s(e.singleInfo.couponCount)+")")])])]),e._v(" "),a("span",{staticClass:"member-span",attrs:{slot:"reference"},slot:"reference"},[a("img",{staticClass:"tablecontent-cellimg mr6",attrs:{width:"60",height:"60",src:s.row.thirdImgUrl?s.row.thirdImgUrl:"./static/img/default.png",alt:""}})])]),e._v(" "),a("span",{staticClass:"fix-block"},[e._v(e._s(e._f("formatMember")(s.row.memberName)))])],1):"grade"==t?a("span",[e._v(e._s(s.row.gradeName))]):"status"==t?a("span",[a("span",{staticClass:"channelicon",class:0==s.row.wxStatus?"xcxicongray":1==s.row.wxStatus?"xcxicon":"",attrs:{title:0==s.row.wxStatus?"未使用小程序":1==s.row.wxStatus?"已使用小程序":""}}),e._v(" "),a("span",{staticClass:"channelicon",class:0==s.row.status?"gzhiconcanclegray":1==s.row.Status?"gzhicon":"gzhicongray",attrs:{title:0==s.row.status?"取消关注公众号":1==s.row.status?"已关注公众号":"未关注公众号"}})]):"channel"==t?a("span",[a("span",{staticClass:"channelicon",class:0==s.row.channelTaobao?"taobaoicongray":1==s.row.channelTaobao?"taobaoicon":""}),e._v(" "),a("span",{staticClass:"channelicon",class:0==s.row.channelJd?"jdicongray":1==s.row.channelJd?"jdicon":""}),e._v(" "),a("span",{staticClass:"channelicon",class:0==s.row.channelWei?"vipicongray":1==s.row.channelWei?"vipicon":""})]):"frozenStatus"==t?a("div",[0==s.row.frozenStatus?a("span",{staticClass:"dm-status--success"},[e._v("正常")]):e._e(),e._v(" "),1==s.row.frozenStatus?a("span",{staticClass:"dm-status--warning"},[e._v("冻结")]):e._e()]):"crateCardDateString"==t?a("div",[a("div",[e._v(e._s(e._f("formatTimeYMD")(s.row.crateCardDateString)))]),e._v(" "),a("div",[e._v(e._s(e._f("formatTimeHMS")(s.row.crateCardDateString)))])]):"createTime"==t?a("div",[a("div",[e._v(e._s(e._f("formatTimeYMD")(s.row.createTime)))]),e._v(" "),a("div",[e._v(e._s(e._f("formatTimeHMS")(s.row.createTime)))])]):"attentionDate"==t?a("div",[a("div",[e._v(e._s(e._f("formatTimeYMD")(s.row.attentionTime)))]),e._v(" "),a("div",[e._v(e._s(e._f("formatTimeHMS")(s.row.attentionTime)))])]):"costAll"==t?a("span",[e._v("\n                    "+e._s(s.row.costFee)+"\n                  ")]):"costTimes"==t?a("span",[e._v("\n                    "+e._s(s.row.costTimes)+"\n                  ")]):"lastCostTime"==t?a("span",[e._v("\n                    "+e._s(s.row.lastCostTime)+"\n                  ")]):"lastCost"==t?a("span",[e._v("\n                    "+e._s(s.row.lastCost)+"\n                  ")]):"avgCost"==t?a("span",[e._v("\n                    "+e._s(s.row.avgCost)+"\n                  ")]):"avgNumber"==t?a("span",[e._v("\n                    "+e._s(s.row.avgNumber)+"\n                  ")]):"costCategory"==t?a("span",[e._v("\n                    "+e._s(s.row.costCategory)+"\n                  ")]):"discountRate"==t?a("span",[e._v("\n                    "+e._s(s.row.discountRate)+"\n                  ")]):"cancelAttentionTime"==t?a("span",[e._v("\n                    "+e._s(e._f("formatTime")(s.row.cancelAttentionTime))+"\n                  ")]):"age"==t?a("span",[e._v("\n                    "+e._s(s.row.age)+"\n                  ")]):"birthday"==t?a("span",[e._v("\n                    "+e._s(s.row.birthdayMD)+"\n                  ")]):"storedValueAll"==t?a("span",[e._v("\n                    "+e._s(s.row.storedValueAll)+"\n                  ")]):"storedValueCurrent"==t?a("span",[e._v("\n                    "+e._s(s.row.storedValueCurrent)+"\n                  ")]):"pointsAll"==t?a("span",[e._v("\n                    "+e._s(s.row.pointsAll)+"\n                  ")]):"pointsCurrent"==t?a("span",[e._v("\n                    "+e._s(s.row.pointsCurrent)+"\n                  ")]):"mainStoreName"==t?a("span",[e._v("\n                    "+e._s(s.row.mainStoreName)+"\n                  ")]):"createCardStoreName"==t?a("span",[e._v("\n                    "+e._s(s.row.openStoreName)+"\n                  ")]):"cardNo"==t?a("span",[e._v("\n                    "+e._s(s.row.cardNo)+"\n                  ")]):"highCost"==t?a("span",[e._v("\n                    "+e._s(s.row.highCost)+"\n                  ")]):e._e()]}}],null,!0)}:{attrs:{prop:t,label:e._f("formatField")(t),sortable:"custom",width:"160"},scopedSlots:e._u([{key:"default",fn:function(s){return["name"==t?a("div",{staticClass:"tablecontent-cell"},[a("el-popover",{attrs:{placement:"top-start",width:"400",height:"180",trigger:"hover"},on:{show:function(t){return e.showSingleInfo(s.row.memberId)}}},[a("div",{staticClass:"pointer"},[a("div",{staticClass:"singelinfo"},[a("div",{staticClass:"singelinfo-img"},[a("img",{attrs:{width:"100",height:"100",src:s.row.thirdImgUrl?s.row.thirdImgUrl:"./static/img/default.png",alt:""}})]),e._v(" "),a("div",{staticClass:"singelinfo-content pLeft10 pRight10"},[a("span",{staticClass:"lheigth0"},[e._v(e._s(s.row.memberName)+"\n                              "),a("span",{staticClass:"channelicon fr",class:0==e.singleInfo.status?"gzhiconcanclegray":1==e.singleInfo.status?"gzhicon":"gzhicongray",attrs:{title:0==e.singleInfo.status?"取消关注公众号":1==e.singleInfo.status?"已关注公众号":"未关注公众号"}}),e._v(" "),a("span",{staticClass:"channelicon fr mr6",class:0==e.singleInfo.wxStatus?"xcxicongray":1==e.singleInfo.wxStatus?"xcxicon":"",attrs:{title:0==e.singleInfo.wxStatus?"未使用小程序":1==e.singleInfo.wxStatus?"使用过小程序":""}})]),e._v(" "),a("p",{staticClass:"lheigth0"},[a("span",{staticClass:"evl-right"},[e._v(e._s(e.singleInfo.sex))]),a("span",{staticClass:"evl-right"},[e._v(e._s(e.singleInfo.age))]),a("span",{attrs:{title:e.singleInfo.cardNo}},[e._v(e._s(e._f("filterCarNo")(e.singleInfo.cardNo)))])]),e._v(" "),a("p",{staticClass:"lheigth0"},[a("span",[e._v(e._s(e.singleInfo.mainStoreName))])]),e._v(" "),a("div",{staticClass:"singelinfo-cost"},[a("div",{staticClass:"singelinfo-costitem"},[a("p",[e._v(e._s(e.singleInfo.costFee))]),e._v(" "),a("p",[e._v("消费总额")])]),e._v(" "),a("div",{staticClass:"singelinfo-costitem"},[a("p",[e._v(e._s(e.singleInfo.costTimes))]),e._v(" "),a("p",[e._v("消费次数")])]),e._v(" "),a("div",{staticClass:"singelinfo-costitem"},[a("p",[e._v(e._s(e.singleInfo.lastCost))]),e._v(" "),a("p",[e._v("最近消费")])])])])]),e._v(" "),a("div",{staticClass:"singelinfo-jl mBottom20 mTop20"},[a("a",{staticClass:"singelinfo-jlitem"},[e._v("消费记录 ("+e._s(e.singleInfo.numOfSale)+")")]),e._v(" "),a("a",{staticClass:"singelinfo-jlitem"},[e._v("营销记录 ("+e._s(e.singleInfo.numOfmarket)+")")]),e._v(" "),a("a",{staticClass:"singelinfo-jlitem"},[e._v("卡券记录 ("+e._s(e.singleInfo.couponCount)+")")])])]),e._v(" "),a("span",{staticClass:"member-span",attrs:{slot:"reference"},slot:"reference"},[a("img",{staticClass:"tablecontent-cellimg mr6",attrs:{width:"60",height:"60",src:s.row.thirdImgUrl?s.row.thirdImgUrl:"./static/img/default.png",alt:""}})])]),e._v(" "),a("span",{staticClass:"fix-block"},[e._v(e._s(e._f("formatMember")(s.row.memberName)))])],1):"grade"==t?a("span",[e._v(e._s(s.row.gradeName))]):"status"==t?a("span",[a("span",{staticClass:"channelicon",class:0==s.row.wxStatus?"xcxicongray":1==s.row.wxStatus?"xcxicon":"",attrs:{title:0==s.row.wxStatus?"未使用小程序":1==s.row.wxStatus?"已使用小程序":""}}),e._v(" "),a("span",{staticClass:"channelicon",class:0==s.row.status?"gzhiconcanclegray":1==s.row.Status?"gzhicon":"gzhicongray",attrs:{title:0==s.row.status?"取消关注公众号":1==s.row.status?"已关注公众号":"未关注公众号"}})]):"channel"==t?a("span",[a("span",{staticClass:"channelicon",class:0==s.row.channelTaobao?"taobaoicongray":1==s.row.channelTaobao?"taobaoicon":""}),e._v(" "),a("span",{staticClass:"channelicon",class:0==s.row.channelJd?"jdicongray":1==s.row.channelJd?"jdicon":""}),e._v(" "),a("span",{staticClass:"channelicon",class:0==s.row.channelWei?"vipicongray":1==s.row.channelWei?"vipicon":""})]):"crateCardDateString"==t?a("div",[a("div",[e._v(e._s(e._f("formatTimeYMD")(s.row.crateCardDateString)))]),e._v(" "),a("div",[e._v(e._s(e._f("formatTimeHMS")(s.row.crateCardDateString)))])]):"createTime"==t?a("div",[a("div",[e._v(e._s(e._f("formatTimeYMD")(s.row.createTime)))]),e._v(" "),a("div",[e._v(e._s(e._f("formatTimeHMS")(s.row.createTime)))])]):"attentionDate"==t?a("div",[a("div",[e._v(e._s(e._f("formatTimeYMD")(s.row.attentionTime)))]),e._v(" "),a("div",[e._v(e._s(e._f("formatTimeHMS")(s.row.attentionTime)))])]):"costAll"==t?a("span",[e._v("\n                    "+e._s(s.row.costFee)+"\n                  ")]):"costTimes"==t?a("span",[e._v("\n                    "+e._s(s.row.costTimes)+"\n                  ")]):"lastCostTime"==t?a("span",[e._v("\n                    "+e._s(s.row.lastCostTime)+"\n                  ")]):"lastCost"==t?a("span",[e._v("\n                    "+e._s(s.row.lastCost)+"\n                  ")]):"avgCost"==t?a("span",[e._v("\n                    "+e._s(s.row.avgCost)+"\n                  ")]):"avgNumber"==t?a("span",[e._v("\n                    "+e._s(s.row.avgNumber)+"\n                  ")]):"costCategory"==t?a("span",[e._v("\n                    "+e._s(s.row.costCategory)+"\n                  ")]):"discountRate"==t?a("span",[e._v("\n                    "+e._s(s.row.discountRate)+"\n                  ")]):"cancelAttentionTime"==t?a("div",[a("div",[e._v(e._s(e._f("formatTimeYMD")(s.row.cancelAttentionTime)))]),e._v(" "),a("div",[e._v(e._s(e._f("formatTimeHMS")(s.row.cancelAttentionTime)))])]):"age"==t?a("span",[e._v("\n                    "+e._s(s.row.age)+"\n                  ")]):"birthday"==t?a("span",[e._v("\n                    "+e._s(s.row.birthdayMD)+"\n                  ")]):"storedValueAll"==t?a("span",[e._v("\n                    "+e._s(s.row.storedValueAll)+"\n                  ")]):"storedValueCurrent"==t?a("span",[e._v("\n                    "+e._s(s.row.storedValueCurrent)+"\n                  ")]):"pointsAll"==t?a("span",[e._v("\n                    "+e._s(s.row.pointsAll)+"\n                  ")]):"pointsCurrent"==t?a("span",[e._v("\n                    "+e._s(s.row.pointsCurrent)+"\n                  ")]):"mainStoreName"==t?a("span",[e._v("\n                    "+e._s(s.row.mainStoreName)+"\n                  ")]):"createCardStoreName"==t?a("span",[e._v("\n                    "+e._s(s.row.openStoreName)+"\n                  ")]):"cardNo"==t?a("span",[e._v("\n                    "+e._s(s.row.cardNo)+"\n                  ")]):"costFee"==t?a("span",[e._v("\n                    "+e._s(s.row.costFee)+"\n                  ")]):"costFeePaid"==t?a("span",[e._v("\n                    "+e._s(s.row.costFeePaid)+"\n                  ")]):"lastCostPaid"==t?a("span",[e._v("\n                    "+e._s(s.row.lastCostPaid)+"\n                  ")]):"highCost"==t?a("span",[e._v("\n                    "+e._s(s.row.highCost)+"\n                  ")]):"highCostPaid"==t?a("span",[e._v("\n                    "+e._s(s.row.highCostPaid)+"\n                  ")]):"frozenStatus"==t?a("div",[0==s.row.frozenStatus?a("span",{staticClass:"dm-status--success"},[e._v("正常")]):e._e(),e._v(" "),1==s.row.frozenStatus?a("span",{staticClass:"dm-status--warning"},[e._v("冻结")]):e._e()]):e._e()]}}],null,!0)})],1)}),e._v(" "),a("el-table-column",{attrs:{label:"操作",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("div",{staticClass:"operate"},[a("router-link",{staticClass:"operate-btn",attrs:{to:{path:"/posmemberDetail",query:{memberId:t.row.memberId,channel:"posMember"}}}},[e._v("查看")])],1)]}}])})],2),e._v(" "),e.memberData.length>0?a("div",{staticClass:"page mTop20 mBottom40"},[a("el-pagination",{attrs:{background:"","current-page":e.page.currentPage,"page-sizes":[20,40,60,80],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next",total:e.page.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()],1)]),e._v(" "),a("el-dialog",{attrs:{title:"自定义字段列表",visible:e.dialogFieldVisible,width:"600px"},on:{"update:visible":function(t){e.dialogFieldVisible=t}}},[a("div",{staticClass:"checkwtip mBottom10"},[e._v("请选择您想显示的列表详细信息，最多勾选8个选项，已经勾选了 "),a("span",{staticClass:"curcheck"},[e._v(e._s(e.checkedFields.length))]),e._v(" 个")]),e._v(" "),a("el-checkbox-group",{attrs:{min:0,max:8},model:{value:e.checkedFields,callback:function(t){e.checkedFields=t},expression:"checkedFields"}},[a("div",{staticClass:"checkwrap"},e._l(e.memberFields,function(t,s){return a("div",{key:s,staticClass:"checkwrap-item lheigth30"},[a("el-checkbox",{key:t,attrs:{label:t}},[e._v(e._s(e._f("formatFieldName")(t)))])],1)}),0)]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogFieldVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.submitFields}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"批量调整积分",visible:e.dialogIntegralVisible,width:"600px"},on:{"update:visible":function(t){e.dialogIntegralVisible=t},close:function(t){return e.closeIntegral("IntegralForm")}}},[a("el-form",{ref:"IntegralForm",attrs:{model:e.IntegralForm,rules:e.rules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"调整积分",prop:"editType"}},[a("el-radio-group",{model:{value:e.IntegralForm.editType,callback:function(t){e.$set(e.IntegralForm,"editType",t)},expression:"IntegralForm.editType"}},[a("el-radio",{attrs:{label:1}},[e._v("增加积分")]),e._v(" "),a("el-radio",{attrs:{label:2}},[e._v("扣除积分")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"调整额度",prop:"accumulatPoints"}},[a("el-input-number",{attrs:{"controls-position":"right",min:1,max:999999},model:{value:e.IntegralForm.accumulatPoints,callback:function(t){e.$set(e.IntegralForm,"accumulatPoints",t)},expression:"IntegralForm.accumulatPoints"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"原因备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.IntegralForm.remark,callback:function(t){e.$set(e.IntegralForm,"remark",t)},expression:"IntegralForm.remark"}})],1),e._v(" "),"gic"==e.integralFlag&&1==e.IntegralForm.editType?a("el-form-item",{attrs:{label:"原始成本主体",prop:"settlementStoreId"}},[a("el-select",{attrs:{prop:"settlementStoreId",filterable:"",remote:"","reserve-keyword":"",placeholder:"请输入原始成本主体","remote-method":e.handleKeyup,loading:e.loading},model:{value:e.IntegralForm.settlementStoreId,callback:function(t){e.$set(e.IntegralForm,"settlementStoreId",t)},expression:"IntegralForm.settlementStoreId"}},e._l(e.storeList,function(e){return a("el-option",{key:e.storeId,attrs:{label:e.storeName,value:e.storeId}})}),1),e._v(" "),a("p",{staticStyle:{color:"","font-size":"12px"}},[e._v("注：除输入选择具体门店选择外，还可输入总部，记总部名下。")])],1):e._e()],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogIntegralVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitIntegral("IntegralForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"批量调整会员等级",visible:e.dialogGradeVisible,width:"600px"},on:{"update:visible":function(t){e.dialogGradeVisible=t},close:function(t){return e.closeGrade("gradeForm")}}},[a("el-form",{ref:"gradeForm",attrs:{model:e.gradeForm,rules:e.graderules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"调整后等级",prop:"gradeId"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.gradeForm.gradeId,callback:function(t){e.$set(e.gradeForm,"gradeId",t)},expression:"gradeForm.gradeId"}},e._l(e.memberGrade,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})}),1)],1),e._v(" "),a("el-form-item",{attrs:{label:"原因备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.gradeForm.remark,callback:function(t){e.$set(e.gradeForm,"remark",t)},expression:"gradeForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogGradeVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitGrade("gradeForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"修改主门店",visible:e.dialogMainstoreVisible,width:"600px"},on:{"update:visible":function(t){e.dialogMainstoreVisible=t}}},[a("el-form",{ref:"mainstoreForm",attrs:{model:e.mainstoreForm,rules:e.mainstorerules,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"选择主门店",prop:"mainOptType"}},[a("el-radio-group",{on:{change:e.handleStore},model:{value:e.mainstoreForm.mainOptType,callback:function(t){e.$set(e.mainstoreForm,"mainOptType",t)},expression:"mainstoreForm.mainOptType"}},[a("p",{staticClass:"lheigth40"},[a("el-radio",{attrs:{label:1}},[e._v("替换为最新协管的门店 ")])],1),e._v(" "),a("p",{staticClass:"lheigth40"},[a("el-radio",{attrs:{label:2}},[e._v("替换为最新协管的自营门店")])],1),e._v(" "),a("p",{staticClass:"lheigth40"},[a("el-radio",{attrs:{label:3}},[e._v("替换为最新协管的自营/联营门店")])],1),e._v(" "),a("p",{staticClass:"lheigth40"},[a("el-radio",{attrs:{label:4}},[e._v("自定义主门店")])],1)]),e._v(" "),""!==e.storeName?a("p",{staticStyle:{"line-height":"0","margin-left":"22px"}},[e._v(e._s(e.storeName)),a("span",{staticClass:"ml15 pointer",on:{click:e.changeStore}},[e._v("修改")])]):a("p",{staticStyle:{"line-height":"0","margin-left":"22px"}},[a("span",{staticClass:"pointer",on:{click:e.changeStore}},[e._v("点击选择主门店")])])],1),e._v(" "),a("el-form-item",{attrs:{label:"原因备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.mainstoreForm.remark,callback:function(t){e.$set(e.mainstoreForm,"remark",t)},expression:"mainstoreForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogMainstoreVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(e){}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"批量修改协管门店",visible:e.dialogSubStoreVisible,width:"800px"},on:{"update:visible":function(t){e.dialogSubStoreVisible=t}}},[a("el-form",{ref:"storeForm",attrs:{model:e.storeForm,rules:e.storerules,"label-width":"120px"}},[a("p",{staticClass:"ml15"},[e._v("当前选择20个会员")]),e._v(" "),a("el-form-item",{attrs:{label:"选择协管门店",prop:"subOptType"}},[a("el-radio",{attrs:{label:1},on:{change:e.changeSubStore},model:{value:e.storeForm.subOptType,callback:function(t){e.$set(e.storeForm,"subOptType",t)},expression:"storeForm.subOptType"}},[e._v("增加协管门店\n              "),a("span",{staticStyle:{color:"#000"}},[e._v(e._s(e.storeForm.addSubStoreName))]),e._v(" "),1==e.storeForm.subOptType?a("span",{staticClass:"pointer",staticStyle:{color:"#000"},on:{click:e.changeStore}},[e._v("选择门店")]):e._e()]),e._v(" "),a("p",{staticClass:"lheigth40"},[a("el-radio",{attrs:{label:2},on:{change:e.changeSubStore},model:{value:e.storeForm.subOptType,callback:function(t){e.$set(e.storeForm,"subOptType",t)},expression:"storeForm.subOptType"}},[e._v("将协管门店")]),e._v(" "),a("el-select",{attrs:{placeholder:"请选择",disabled:2!=e.storeForm.subOptType},model:{value:e.storeForm.premodefiySubStoreId,callback:function(t){e.$set(e.storeForm,"premodefiySubStoreId",t)},expression:"storeForm.premodefiySubStoreId"}},e._l(e.subStoreList,function(e){return a("el-option",{key:e.storeId,attrs:{label:e.storeName,value:e.storeId}})}),1),e._v("\n              修改为 "+e._s(e.storeForm.modefiySubStoreName)),2==e.storeForm.subOptType?a("span",{staticClass:"pointer",on:{click:e.changeStore}},[e._v("选择门店")]):e._e()],1),e._v(" "),a("el-radio",{attrs:{label:3},on:{change:e.changeSubStore},model:{value:e.storeForm.subOptType,callback:function(t){e.$set(e.storeForm,"subOptType",t)},expression:"storeForm.subOptType"}},[e._v("将协管门店\n              "),a("el-select",{attrs:{placeholder:"请选择",disabled:3!=e.storeForm.subOptType},model:{value:e.storeForm.deleteSubStoreId,callback:function(t){e.$set(e.storeForm,"deleteSubStoreId",t)},expression:"storeForm.deleteSubStoreId"}},e._l(e.subStoreList,function(e){return a("el-option",{key:e.storeId,attrs:{label:e.storeName,value:e.storeId}})}),1),a("span",{staticStyle:{color:"#000",cursor:"default"}},[e._v(" 删除")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"原因备注",prop:"remark"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.storeForm.remark,callback:function(t){e.$set(e.storeForm,"remark",t)},expression:"storeForm.remark"}})],1)],1),e._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogSubStoreVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitStore("storeForm")}}},[e._v("确 定")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"查看批量处理进度",visible:e.dialogProcessVisible,width:"600px"},on:{"update:visible":function(t){e.dialogProcessVisible=t},close:e.closeProcess}},[e._l(e.processList,function(t,s){return a("div",{key:s,staticClass:"process"},[a("span",{staticClass:"process-name"},[e._v(e._s(t.name))]),a("span",{staticClass:"process-status"},[a("el-progress",{attrs:{percentage:e._f("formatProcess")(t)}})],1)])}),e._v(" "),e.processList.length<=0?a("p",[e._v("暂无批量处理")]):e._e(),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogProcessVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogProcessVisible=!1}}},[e._v("确 定")])],1)],2)],1)],1),e._v(" "),a("div",{staticClass:"foot-add"},[a("vue-gic-footer")],1)])},staticRenderFns:[]};var _=a("VU/8")(b,v,!1,function(e){a("n0Gd")},null,null);t.default=_.exports},n0Gd:function(e,t){}});