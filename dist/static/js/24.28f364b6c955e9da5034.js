webpackJsonp([24],{"6Bqd":function(e,t){},Cj6o:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=a("Dd8w"),n=a.n(r),l=a("WSiR"),i=a("AKaA"),o=a("NTL1"),s=a("8V46"),c=a("UXnk"),u=a("oAV5"),d={name:"talkLogPage",data:function(){return{loseVisible:!1,loseData:[],memberId:this.$route.query.memberId||"",navpath:[{name:"首页",path:"/"},{name:"会员详情",path:"/wechatmemberDetail?memberId="+this.$route.query.memberId||""},{name:"会员积分明细",path:""}],page:{currentPage:1,pageSize:20,totalCount:0},memberData:[],intervalInOut:-1,dictCode:-1,searchStr:"",searchType:1,beginTime:"",endTime:"",storeName:"",dilogPlayVisible:!1,curRecordUrl:"",dictList:[],dilogIntegralVisible:!1,integralFlag:""}},methods:{linkRoute:function(e){this.$router.push({path:e,query:{memberId:this.memberId}})},handleSearch:function(){this.page.currentPage=1,this.getIntegralDataPage()},handleCurrentChange:function(e){this.page.currentPage=e,this.getIntegralDataPage()},handleSizeChange:function(e){this.page.pageSize=e,this.getIntegralDataPage()},goback:function(){this.$router.push({path:"wechatmemberDetail",query:{memberId:this.memberId}})},detaliInfo:function(e){var t=this;Object(i.a)("/api-member/member-integral-source",{intervalLogId:e}).then(function(e){0===e.data.errorCode&&(t.loseData=e.data.result.intervalDetailList.map(function(e){return n()({},e,{createTime:-1!=e.createTime?Object(u.a)(e.createTime,1):"--"})}),t.loseVisible=!0)})},getIntegralDataPage:function(){var e=this;Object(i.a)(o.a.integralDataPage,{memberId:this.memberId,pageSize:this.page.pageSize,currentPage:this.page.currentPage,intervalInOut:this.intervalInOut,dictCode:this.dictCode,searchStr:this.searchStr,searchType:this.searchType,beginTime:this.beginTime,endTime:this.endTime,storeName:this.storeName}).then(function(t){0===t.data.errorCode?(e.memberData=t.data.result.page.result&&t.data.result.page.result.map(function(e){return n()({},e,{mainStoreName:e.mainStoreName?e.mainStoreName:"--"})}),e.page.currentPage=t.data.result.page.currentPage,e.page.totalCount=t.data.result.page.totalCount):Object(s.a)(t.data.message)}).catch(function(e){Object(s.b)(e)})},getIntegralOperateType:function(){var e=this;Object(i.a)(o.a.integralOperateType,{businessType:"member_integral",dictStatus:0}).then(function(t){0===t.data.errorCode?(t.data.result.dictList.forEach(function(e){"1113"==e.dictCode&&占位}),e.dictList=t.data.result.dictList):Object(s.a)()}).catch(function(e){Object(s.b)(e)})},getEnterpriseInfo:function(){var e=this;Object(i.a)(o.a.enterpriseInfo).then(function(t){0==t.data.errorCode?e.integralFlag=t.data.result.enterpriseInfo.integralFlag:Object(s.a)()}).catch(function(e){Object(s.b)(e)})}},created:function(){this.memberId&&(this.getIntegralDataPage(),this.getIntegralOperateType()),this.$store.commit("mutations-slide",!1)},components:{"v-nav":l.a,searchinput:c.a}},p={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"minwidth1200 wechat-point-details"},[a("div",{staticClass:"con-container"},[a("v-nav",{attrs:{navpath:e.navpath}}),e._v(" "),a("div",{staticClass:"wrap table-container"},[a("div",{staticClass:"mBottom20"},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-select",{staticStyle:{"margin-right":"7px"},attrs:{placeholder:"所有日志"},on:{change:e.handleSearch},model:{value:e.intervalInOut,callback:function(t){e.intervalInOut=t},expression:"intervalInOut"}},[a("el-option",{key:-1,attrs:{label:"所有日志",value:-1}}),e._v(" "),a("el-option",{key:1,attrs:{label:"积分获取",value:1}}),e._v(" "),a("el-option",{key:2,attrs:{label:"积分扣除",value:2}})],1),e._v(" "),a("el-select",{attrs:{placeholder:"所有事由"},on:{change:e.handleSearch},model:{value:e.dictCode,callback:function(t){e.dictCode=t},expression:"dictCode"}},[a("el-option",{key:-1,attrs:{label:"所有事由",value:-1}}),e._v(" "),e._l(e.dictList,function(e){return a("el-option",{key:e.dictCode,attrs:{label:e.dictName,value:e.dictCode}})})],2)],1),e._v(" "),a("div",{attrs:{span:12}},[a("div",{staticClass:"displayflex tr"},[a("div",{staticClass:"flex"},[a("searchinput",{attrs:{stylelink:"width: 280px","prefix-icon":"el-icon-search",placeholder:"请输入会员姓名/昵称/手机"},on:{handleSearch:e.handleSearch},model:{value:e.searchStr,callback:function(t){e.searchStr=t},expression:"searchStr"}})],1),e._v(" "),a("div",{staticClass:"ml15"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.linkRoute("/modifyintegral")}}},[e._v("调整积分")])],1)])])],1)],1),e._v(" "),a("div",{staticClass:"mBottom40"},[a("div",{staticClass:"table-content"},[a("el-table",{ref:"multipleTable",attrs:{data:e.memberData,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{prop:"callBeginTime",label:"时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n                "+e._s(e._f("formatTime")(t.row.createTime))+"\n              ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"intervalInout",label:"日志类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[1==t.row.intervalInout?a("span",[e._v("积分获取")]):e._e(),e._v(" "),0==t.row.intervalInout?a("span",[e._v("积分扣除")]):e._e()]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"intervalHistory",label:"日志详情"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{style:{color:t.row.intervalHistory>0?"green":"red"}},[e._v(e._s(t.row.intervalHistory))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"memberIntegralName",label:"事由"}}),e._v(" "),a("el-table-column",{attrs:{prop:"remark",label:"备注"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mainStoreName",label:"主门店"}}),e._v(" "),a("el-table-column",{attrs:{prop:"openStoreName",label:"开卡门店"}}),e._v(" "),a("el-table-column",{attrs:{prop:"intervalEffect",label:"积分成本主体"},scopedSlots:e._u([{key:"default",fn:function(t){return[0==t.row.intervalInout?a("span",[e._v("--")]):e._e(),e._v(" "),1==t.row.intervalInout?a("span",[e._v(e._s(t.row.mainPartStoreName?t.row.mainPartStoreName:"--"))]):e._e()]}}])})],1),e._v(" "),e.page.totalCount>0?a("div",{staticClass:"page mTop20"},[a("el-pagination",{attrs:{background:"","current-page":e.page.currentPage,"page-sizes":[20,40,60,80],"page-size":e.page.pageSize,layout:"total, sizes, prev, pager, next",total:e.page.totalCount},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1):e._e()],1)])])],1),e._v(" "),a("el-dialog",{attrs:{title:"积分扣除来源",visible:e.loseVisible,width:"60%","close-on-click-modal":!1},on:{"update:visible":function(t){e.loseVisible=t}}},[a("div",{staticClass:"lose-dilog"},[a("el-table",{ref:"multipleTable",attrs:{data:e.loseData,"tooltip-effect":"dark"}},[a("el-table-column",{attrs:{prop:"createTime",label:"日期",width:"200"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n            "+e._s(t.row.createTime)+"\n          ")]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"intervalHistory",label:"日志详情"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{style:{color:t.row.intervalHistory>0?"green":"red"}},[e._v(e._s(t.row.intervalHistory))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"memberIntegralName",label:"事由"}}),e._v(" "),a("el-table-column",{attrs:{prop:"mainPartStoreName",label:"积分成本主体"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",[e._v(e._s(t.row.mainPartStoreName?t.row.mainPartStoreName:"--"))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"sourceIntegralChange",label:"扣除积分值"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("span",{staticStyle:{color:"red"}},[e._v(e._s(t.row.sourceIntegralChange))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"intervalEffect",label:"积分剩余值"}})],1)],1),e._v(" "),a("span",{staticClass:"dilog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.loseVisible=!1}}},[e._v("取 消")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.loseVisible=!1}}},[e._v("确 定")])],1)]),e._v(" "),a("div",{staticClass:"footer-box"},[a("vue-gic-footer")],1)],1)},staticRenderFns:[]};var m=a("VU/8")(d,p,!1,function(e){a("6Bqd")},null,null);t.default=m.exports}});